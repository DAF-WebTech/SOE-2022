{"version":3,"sources":["../../../src/biodiversity/freshwater-wetland/freshwater-wetland-protected.js"],"sourcesContent":["\"use strict\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n\tconst systems = [\"Lacustrine\", \"Palustrine\", \"Riverine\"]\r\n\tconst series1Keys = soefinding.findingJson.meta.fields.slice(2, 8)\r\n\tconst series2Keys = soefinding.findingJson.meta.fields.slice(-2)\r\n\r\n\t// group by region\r\n\tconst regions = {}\r\n\tsoefinding.findingJson.data.forEach(d => {\r\n\t\tif (! regions[d[\"State of the Environment Report drainage division\"]])\r\n\t\t\tregions[d[\"State of the Environment Report drainage division\"]] = []\r\n\t\tregions[d[\"State of the Environment Report drainage division\"]].push(d)\r\n\t})\r\n\r\n\t// initialise series for queensland\r\n\tsoefinding.findingContent.Queensland = {\r\n\t\tseries1: systems.map(s => {\r\n\t\t\treturn {\r\n\t\t\t\tname: s,\r\n\t\t\t\tdata: series1Keys.map(k => 0)\r\n\t\t\t}\r\n\t\t}),\r\n\t\tseries2: series2Keys.map(s => {\r\n\t\t\treturn {\r\n\t\t\t\tname: s,\r\n\t\t\t\tdata: systems.map(k => 0)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t// iterate regions and make a series1 for them\r\n\tfor (let r in regions) {\r\n\t\tsoefinding.findingContent[r] = { \r\n\t\t\tseries1: regions[r].map((d, i) => {\r\n\r\n\t\t\t\tconst retVal = {\r\n\t\t\t\t\tname: d[\"Wetland system\"],\r\n\t\t\t\t\tdata: series1Keys.map(k => d[k])\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// side effect, populate qld values\r\n\t\t\t\tsoefinding.findingContent.Queensland.series1[i].data.forEach( function(x, j) {\r\n\t\t\t\t\tsoefinding.findingContent.Queensland.series1[i].data[j] += d[series1Keys[j]]\r\n\t\t\t\t})\r\n\r\n\t\t\t\treturn retVal\r\n\t\t\t}),\r\n\t\t\tseries2: series2Keys.map((k, i) => {\r\n\r\n\t\t\t\tconst retVal = {\r\n\t\t\t\t\tname: k,\r\n\t\t\t\t\tdata: regions[r].map(d => d[k])\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// side effect, populate qld values\r\n\t\t\t\tretVal.data.forEach((rv, j) => {\r\n\t\t\t\t\tsoefinding.findingContent.Queensland.series2[i].data[j] += rv\r\n\t\t\t\t})\r\n\r\n\t\t\t\treturn retVal\r\n\t\t\t})\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tconst options1 = soefinding.getDefaultStackedColumnChartOptions()\r\n\toptions1.tooltip.y = { formatter: val => val.toLocaleString() } \r\n\toptions1.xaxis.categories = [ /*there's no easy way to automatically break these down so do it manually*/\r\n\t\t\"Nature refuge\", \r\n\t\t[\"National park\", \"(scientific)\"],\r\n\t\t\"National park\",\r\n\t\t[\"National park\", \"(Cape York\", \"Aboriginal land)\"],\r\n\t\t\"Conservation park\",\r\n\t\t\"Resources reserve\"\r\n\t]\r\n\tdelete options1.xaxis.tickPlacement\r\n\toptions1.xaxis.title.text = \"Protected area type\"\r\n\toptions1.yaxis.labels.formatter = val => `${val/1000}K`\r\n\toptions1.yaxis.title.text = \"Hectares\"\r\n\r\n\tsoefinding.state.chart1 = {\r\n\t\tseries: soefinding.findingContent[soefinding.state.currentRegionName].series1,\r\n\t\toptions: options1,\r\n\t\tchartactive: true,\r\n\t}\r\n\r\n\tconst options2 = JSON.parse(JSON.stringify(options1))\r\n\toptions2.tooltip.y = options1.tooltip.y\r\n\toptions2.xaxis.categories = systems\r\n\toptions2.xaxis.title.text = \"Wetland System\"\r\n\toptions2.yaxis.labels.formatter = val => val >= 1000000 ? `${val/1000000}M` : val > 1000 ? `${val/1000}K` : val\r\n\r\n\tsoefinding.state.chart2 = {\r\n\t\tseries: soefinding.findingContent[soefinding.state.currentRegionName].series2,\r\n\t\toptions: options2,\r\n\t\tchartactive: true,\r\n\t}\r\n\r\n\r\n\r\n\tnew Vue({\r\n\t\tel: \"#chartContainer\",\r\n\t\tdata: soefinding.state,\r\n\t\tcomputed: {\r\n\t\t\theading1: function() { \r\n\t\t\t\tlet retVal = \"Proportion of freshwater wetland systems in protected areas\"\r\n\t\t\t\tif (this.currentRegionName != \"Queensland\")\r\n\t\t\t\t\tretVal += ` in ${this.currentRegionName}`\r\n\t\t\t\tretVal += \", 2024 (TODO fix year)\"\r\n\t\t\t\treturn retVal\r\n\t\t\t},\r\n\t\t\theading2: function() { \r\n\t\t\t\tlet retVal = \"Overall protection of freshwater wetland systems\"\r\n\t\t\t\tif (this.currentRegionName != \"Queensland\")\r\n\t\t\t\t\tretVal += ` in ${this.currentRegionName}`\r\n\t\t\t\tretVal += \", 2024 (TODO fix year)\"\r\n\t\t\t\treturn retVal\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tformatter1: val => val.toLocaleString()\r\n\t\t}\r\n\t})\r\n\r\n\r\n\twindow.soefinding.onRegionChange = function () {\r\n\t\tsoefinding.state.chart1.series = soefinding.findingContent[soefinding.state.currentRegionName].series1\r\n\t\tsoefinding.state.chart2.series = soefinding.findingContent[soefinding.state.currentRegionName].series2\r\n\r\n\t\tsoefinding.loadFindingHtml()\r\n\t}\r\n})"],"mappings":"aAEA,SAAS,iBAAiB,mBAAoB,UAAY,CAEzD,GAAM,GAAU,CAAC,aAAc,aAAc,YACvC,EAAc,WAAW,YAAY,KAAK,OAAO,MAAM,EAAG,GAC1D,EAAc,WAAW,YAAY,KAAK,OAAO,MAAM,IAGvD,EAAU,GAChB,WAAW,YAAY,KAAK,QAAQ,GAAK,CACxC,AAAM,EAAQ,EAAE,uDACf,GAAQ,EAAE,sDAAwD,IACnE,EAAQ,EAAE,sDAAsD,KAAK,KAItE,WAAW,eAAe,WAAa,CACtC,QAAS,EAAQ,IAAI,GACb,EACN,KAAM,EACN,KAAM,EAAY,IAAI,GAAK,MAG7B,QAAS,EAAY,IAAI,GACjB,EACN,KAAM,EACN,KAAM,EAAQ,IAAI,GAAK,OAM1B,OAAS,KAAK,GACb,WAAW,eAAe,GAAK,CAC9B,QAAS,EAAQ,GAAG,IAAI,CAAC,EAAG,IAAM,CAEjC,GAAM,GAAS,CACd,KAAM,EAAE,kBACR,KAAM,EAAY,IAAI,GAAK,EAAE,KAI9B,kBAAW,eAAe,WAAW,QAAQ,GAAG,KAAK,QAAS,SAAS,EAAG,EAAG,CAC5E,WAAW,eAAe,WAAW,QAAQ,GAAG,KAAK,IAAM,EAAE,EAAY,MAGnE,IAER,QAAS,EAAY,IAAI,CAAC,EAAG,IAAM,CAElC,GAAM,GAAS,CACd,KAAM,EACN,KAAM,EAAQ,GAAG,IAAI,GAAK,EAAE,KAI7B,SAAO,KAAK,QAAQ,CAAC,EAAI,IAAM,CAC9B,WAAW,eAAe,WAAW,QAAQ,GAAG,KAAK,IAAM,IAGrD,KAMV,GAAM,GAAW,WAAW,sCAC5B,EAAS,QAAQ,EAAI,CAAE,UAAW,GAAO,EAAI,kBAC7C,EAAS,MAAM,WAAa,CAC3B,gBACA,CAAC,gBAAiB,gBAClB,gBACA,CAAC,gBAAiB,aAAc,oBAChC,oBACA,qBAED,MAAO,GAAS,MAAM,cACtB,EAAS,MAAM,MAAM,KAAO,sBAC5B,EAAS,MAAM,OAAO,UAAY,GAAO,GAAG,EAAI,OAChD,EAAS,MAAM,MAAM,KAAO,WAE5B,WAAW,MAAM,OAAS,CACzB,OAAQ,WAAW,eAAe,WAAW,MAAM,mBAAmB,QACtE,QAAS,EACT,YAAa,IAGd,GAAM,GAAW,KAAK,MAAM,KAAK,UAAU,IAC3C,EAAS,QAAQ,EAAI,EAAS,QAAQ,EACtC,EAAS,MAAM,WAAa,EAC5B,EAAS,MAAM,MAAM,KAAO,iBAC5B,EAAS,MAAM,OAAO,UAAY,GAAO,GAAO,IAAU,GAAG,EAAI,OAAa,EAAM,IAAO,GAAG,EAAI,OAAU,EAE5G,WAAW,MAAM,OAAS,CACzB,OAAQ,WAAW,eAAe,WAAW,MAAM,mBAAmB,QACtE,QAAS,EACT,YAAa,IAKd,GAAI,KAAI,CACP,GAAI,kBACJ,KAAM,WAAW,MACjB,SAAU,CACT,SAAU,UAAW,CACpB,GAAI,GAAS,8DACb,MAAI,MAAK,mBAAqB,cAC7B,IAAU,OAAO,KAAK,qBACvB,GAAU,yBACH,GAER,SAAU,UAAW,CACpB,GAAI,GAAS,mDACb,MAAI,MAAK,mBAAqB,cAC7B,IAAU,OAAO,KAAK,qBACvB,GAAU,yBACH,IAIT,QAAS,CACR,WAAY,GAAO,EAAI,oBAKzB,OAAO,WAAW,eAAiB,UAAY,CAC9C,WAAW,MAAM,OAAO,OAAS,WAAW,eAAe,WAAW,MAAM,mBAAmB,QAC/F,WAAW,MAAM,OAAO,OAAS,WAAW,eAAe,WAAW,MAAM,mBAAmB,QAE/F,WAAW","names":[]}
{"version":3,"sources":["../../../src/biodiversity/species-habitat/threatened-species-habitat.old.js"],"sourcesContent":["// this is used by both fauna and flora\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n\n\tsoefinding.yearKeys = soefinding.findingJson.meta.fields.slice(3);\n\tsoefinding.state.latestYear = soefinding.yearKeys[soefinding.yearKeys.length - 1];\n\tsoefinding.regions = {};\n\tsoefinding.findingJson.data.forEach(function (row) {\n\t\tif (!soefinding.regions[row.Region]) {\n\t\t\tsoefinding.regions[row.Region] = [];\n\t\t}\n\t\tsoefinding.regions[row.Region].push(row);\n\t});\n\tsoefinding.regionNames = Object.keys(soefinding.regions);\n\tsoefinding.speciesGroups = [];\n\tsoefinding.regions[soefinding.state.currentRegionName].forEach(function (row) {\n\t\tsoefinding.speciesGroups.push(row.Group);\n\t});\n\n\tsoefinding.regionNames.forEach(function (regionName) {\n\t\t// findingContent holds the html and data series for each region\n\t\tsoefinding.findingContent[regionName] = {\n\t\t\thtml: \"\",\n\t\t\tapp1: [],\n\t\t\tapp2: [],\n\t\t\tapp3: [],\n\t\t\tapp4: [],\n\t\t};\n\n\t\t// do some work to normalise the json to apex chart format, chart 1\n\t\tconst series = [\n\t\t\t{\n\t\t\t\tname: \"Pre-clear\",\n\t\t\t\tdata: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Remnant\",\n\t\t\t\tdata: [],\n\t\t\t},\n\t\t];\n\t\tsoefinding.regions[regionName].forEach(function (row, i) {\n\t\t\tseries[0].data.push(row[\"Pre-clear\"]);\n\t\t\tseries[1].data.push(row[soefinding.state.latestYear]);\n\t\t});\n\t\tsoefinding.findingContent[regionName].app1 = series;\n\n\t\t// chart 2 -- normalise date to apex charts format\n\t\tconst series2 = [\n\t\t\t{\n\t\t\t\tname: \"Remnant\",\n\t\t\t\tdata: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Non-remnant\",\n\t\t\t\tdata: [],\n\t\t\t},\n\t\t];\n\t\tsoefinding.regions[regionName].forEach(function (row, i) {\n\t\t\tseries2[0].data.push(row[soefinding.state.latestYear]);\n\t\t\tseries2[1].data.push(row[\"Pre-clear\"] - row[soefinding.state.latestYear]);\n\t\t});\n\t\tsoefinding.findingContent[regionName].app2 = series2;\n\n\t\t// chart 3 -- normalise date to apex charts format\n\t\tconst series3 = [];\n\t\tsoefinding.speciesGroups.forEach(function (group, index) {\n\t\t\tconst data = [];\n\t\t\tsoefinding.yearKeys.forEach(function (key) {\n\t\t\t\tconst item = soefinding.regions[regionName][index][key];\n\t\t\t\tdata.push(item);\n\t\t\t});\n\t\t\tseries3.push({ name: group, data: data });\n\t\t});\n\t\tsoefinding.findingContent[regionName].app3 = series3;\n\n\t\tif (regionName == \"Queensland\") {\n\t\t\t// chart 4 -- normalise date to apex charts format\n\t\t\tsoefinding.speciesPreClear = {};\n\t\t\tsoefinding.speciesGroups.forEach(function (species, i) {\n\t\t\t\tsoefinding.speciesPreClear[species] = [];\n\t\t\t\tsoefinding.regionNames.forEach(function (key) {\n\t\t\t\t\tif (key == \"Queensland\") return; //don't do Queensland\n\t\t\t\t\tsoefinding.speciesPreClear[species].push(\n\t\t\t\t\t\tsoefinding.regions[key][i][\"Pre-clear\"]\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n\n\t//save the default html we received from the server\n\tsoefinding.findingContent[soefinding.firstChildPage].html = document.getElementById(\n\t\t\"findingTextContents\"\n\t).innerHTML;\n\n\t// create vue app instances\n\t// create the vue instance for first chart, our column chart\n\tvar options1 = soefinding.getDefaultBarChartOptions();\n\toptions1.xaxis.categories = soefinding.speciesGroups;\n\toptions1.xaxis.title.text = \"Fauna Group\";\n\toptions1.yaxis.title.text = \"Hectares\";\n\toptions1.yaxis.labels.formatter = function (val) {\n\t\treturn val / 1000000 + \"M\";\n\t}\n\toptions1.tooltip.y = {\n\t\tformatter: function (val) {\n\t\t\treturn val.toLocaleString() + \" ha\";\n\t\t},\n\t}\n\n\t// set up our second chart/table app, which is a stacked column\n\tvar options2 = soefinding.getPercentStackedBarChartOptions();\n\toptions2.xaxis.categories = soefinding.speciesGroups;\n\toptions2.xaxis.title.text = \"Fauna Group\";\n\toptions2.yaxis.title.text = \"Proportion\";\n\toptions2.tooltip.y = {\n\t\tformatter: function (val) {\n\t\t\treturn val.toLocaleString() + \" ha\";\n\t\t},\n\t}\n\n\t// set up our third chart/table app which is lines for each species\n\n\tvar options3 = soefinding.getDefaultLineChartOptions();\n\toptions3.xaxis.categories = soefinding.yearKeys;\n\toptions3.xaxis.title.text = { text: \"Year\" };\n\toptions3.yaxis.labels.formatter = function (val, index) {\n\t\treturn val / 1000000 + \"M\";\n\t}\n\toptions3.yaxis.title.text = { text: \"Hectares\" };\n\toptions3.chart.events = {\n\t\tlegendClick: function (chartContext, seriesIndex, config) {\n\t\t\tvar name = soefinding.speciesGroups[seriesIndex];\n\t\t\tsoefinding.app4.series = soefinding.speciesPreClear[name];\n\t\t\tsoefinding.app4.speciesName = name;\n\t\t},\n\t};\n\n\t// set up our fourth chart/table which is a pie\n\tvar options4 = soefinding.getDefaultPieChartOptions();\n\toptions4.labels = soefinding.regionNames.slice(1); // remove leading \"Queensland\"\n\toptions4.xaxis = { categories: options4.labels };\n\n\tsoefinding.state.chart1 = {\n\t\toptions: options1,\n\t\tseries: soefinding.findingContent[soefinding.state.currentRegionName].app1,\n\t\tchartactive: true,\n\t};\n\n\tsoefinding.state.chart2 = {\n\t\toptions: options2,\n\t\tseries: soefinding.findingContent[soefinding.state.currentRegionName].app2,\n\t\tchartactive: true,\n\t};\n\n\tsoefinding.state.chart3 = {\n\t\toptions: options3,\n\t\tseries: soefinding.findingContent[soefinding.state.currentRegionName].app3,\n\t\tchartactive: true,\n\t};\n\n\tsoefinding.state.chart4 = {\n\t\toptions: options4,\n\t\tseries: soefinding.speciesPreClear[\"Birds\"],\n\t\tchartactive: true,\n\t};\n\n\t//\n\n\tnew Vue({\n\t\tel: \"#chartContainer\",\n\t\tdata: soefinding.state,\n\t\tcomputed: {\n\t\t\theading1: function () { return `Area of ${this.currentRegionName} pre-clear threatened ${soefinding.biota} habitat and ${this.latestYear} remnant habitat by species group` },\n\t\t\theading2: function () { return `Proportion of ${this.currentRegionName} pre-clear threatened ${soefinding.biota} habitat that is remnant and non-remnant habitat, ${this.latestYear}` },\n\t\t\theading3: function () { return `Trend in threatened species habitat, for ${this.currentRegionName}` },\n\t\t\theading4: function () { return `Proportion of pre-clear threatened ${this.currentSpecies} habitat by bioregion` }\n\t\t},\n\t\tmethods : {\n\t\t    formatter1: val => val.toLocaleString()\n\t\t}\n\t});\n\n\n\twindow.soefinding.onRegionChange = function () {\n\t\t// set the data series in each of the vue apps, for the current region\n\t\tsoefinding.state.chart1.series =\n\t\t\tthis.findingContent[this.state.currentRegionName].app1;\n\t\tsoefinding.state.chart2.series =\n\t\t\tthis.findingContent[this.state.currentRegionName].app2;\n\t\tsoefinding.state.chart3.series =\n\t\t\tthis.findingContent[this.state.currentRegionName].app3;\n\t\tsoefinding.state.chart4.series =\n\t\t\tthis.findingContent[this.state.currentRegionName].app4;\n\n\t\tsoefinding.loadFindingHtml();\n\t};\n\n\n})"],"mappings":"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","names":[]}
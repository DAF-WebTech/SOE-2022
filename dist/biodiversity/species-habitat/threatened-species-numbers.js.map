{"version":3,"sources":["../../../src/biodiversity/species-habitat/threatened-species-numbers.js"],"sourcesContent":["// this is used by both flora and fauna\n\n\"use strict\";\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n\tconst series1Keys = soefinding.findingJson.meta.fields.filter(f => f.includes(\"threatened\") \n\t\t\t&& !f.includes(\"near\"))\n\tconst series1 = soefinding.findingJson.data.map(d => {\n\t\treturn {\n\t\t\tname: d.Group,\n\t\t\tdata: series1Keys.map(k => d[k])\n\t\t}\n\t})\n\n\tconst options1 = soefinding.getDefaultStackedColumnChartOptions()\n\toptions1.xaxis.categories = series1Keys.map(k => k.split(\" \")[0])\n\toptions1.xaxis.title.text = \"Year\"\n\toptions1.yaxis.title.text = \"Number of species\"\n\n\tsoefinding.state.chart1 = {\n\t\toptions: options1,\n\t\tseries: series1,\n\t\tchartactive: true,\n\t}\n\n\t// now set up check box list \n\t// and a chart component for each item in data\n\tconst years = options1.xaxis.categories\n\t// there's a bad situation here where they changed the name of extinct in 2019, we need to normalise this.\n\tsoefinding.findingJson.data.forEach(d => {\n\t\tyears.forEach(y => {\n\t\t\tif (d.hasOwnProperty(`${y} extinct in the wild`))\n\t\t\t\td[`${y} presumed extinct`] = d[`${y} extinct in the wild`]\n\t\t})\n\t})\n\n\n\tconst series2Fields = [\"vulnerable\", \"endangered\", \"presumed extinct\"]\n\tconst series2Keys = []\n\tyears.forEach(y => {\n\t\tseries2Fields.forEach(f => series2Keys.push(`${y} ${f}`))\n\t})\n\n\tconst species = soefinding.findingJson.data.map(d => {\n\t\treturn { \n\t\t\tname: d.Group, \n\t\t\tchecked: false,\n\t\t\tchartactive: true,\n\t\t\tdata: series2Fields.map(f => { \n\t\t\t\treturn {\n\t\t\t\t\tname: f[0].toUpperCase() + f.slice(1), \n\t\t\t\t\tdata: series2Keys.filter(k => k.includes(f)).map(k => d[k])\n\t\t\t\t}\n\t\t\t}),\n\t\t}\n\t})\n\tspecies[0].checked = true\n\tsoefinding.state.species = species\n\n\tsoefinding.state.options2 = soefinding.getDefaultStackedColumnChartOptions()\n\tsoefinding.state.options2.xaxis.categories = options1.xaxis.categories\n\tsoefinding.state.options2.xaxis.title.text = \"Year\"\n\tsoefinding.state.options2.yaxis.title.text = \"Number of species\"\n\n\n\n\n\tnew Vue({\n\t\tel: \"#chartContainer\",\n\t\tdata: soefinding.state,\n\t\tcomputed: {\n\t\t\theading1: () => `Numbers of threatened ${soefinding.biota} (<i>Nature Conservation Act 1992</i> Extinct, Extinct in the Wild, Critically Endangered, Endangered, and Vulnerable) by species group`\n\t\t},\n\t\tmethods: {\n\t\t\tformatter1: val => val\n\t\t}\n\t})\n})"],"mappings":"aAIA,SAAS,iBAAiB,mBAAoB,UAAY,CAEzD,KAAM,aAAc,WAAW,YAAY,KAAK,OAAO,OAAO,GAAK,EAAE,SAAS,eACzE,CAAC,EAAE,SAAS,SACjB,KAAM,SAAU,WAAW,YAAY,KAAK,IAAI,GAAK,CACpD,MAAO,CACN,KAAM,EAAE,MACR,KAAM,YAAY,IAAI,GAAK,EAAE,OAI/B,KAAM,UAAW,WAAW,sCAC5B,SAAS,MAAM,WAAa,YAAY,IAAI,GAAK,EAAE,MAAM,KAAK,IAC9D,SAAS,MAAM,MAAM,KAAO,OAC5B,SAAS,MAAM,MAAM,KAAO,oBAE5B,WAAW,MAAM,OAAS,CACzB,QAAS,SACT,OAAQ,QACR,YAAa,MAKd,KAAM,OAAQ,SAAS,MAAM,WAE7B,WAAW,YAAY,KAAK,QAAQ,GAAK,CACxC,MAAM,QAAQ,GAAK,CAClB,GAAI,EAAE,eAAe,GAAG,yBACvB,EAAE,GAAG,sBAAwB,EAAE,GAAG,6BAKrC,KAAM,eAAgB,CAAC,aAAc,aAAc,oBACnD,KAAM,aAAc,GACpB,MAAM,QAAQ,GAAK,CAClB,cAAc,QAAQ,GAAK,YAAY,KAAK,GAAG,KAAK,QAGrD,KAAM,SAAU,WAAW,YAAY,KAAK,IAAI,GAAK,CACpD,MAAO,CACN,KAAM,EAAE,MACR,QAAS,MACT,YAAa,KACb,KAAM,cAAc,IAAI,GAAK,CAC5B,MAAO,CACN,KAAM,EAAE,GAAG,cAAgB,EAAE,MAAM,GACnC,KAAM,YAAY,OAAO,GAAK,EAAE,SAAS,IAAI,IAAI,GAAK,EAAE,UAK5D,QAAQ,GAAG,QAAU,KACrB,WAAW,MAAM,QAAU,QAE3B,WAAW,MAAM,SAAW,WAAW,sCACvC,WAAW,MAAM,SAAS,MAAM,WAAa,SAAS,MAAM,WAC5D,WAAW,MAAM,SAAS,MAAM,MAAM,KAAO,OAC7C,WAAW,MAAM,SAAS,MAAM,MAAM,KAAO,oBAK7C,GAAI,KAAI,CACP,GAAI,kBACJ,KAAM,WAAW,MACjB,SAAU,CACT,SAAU,IAAM,yBAAyB,WAAW,gJAErD,QAAS,CACR,WAAY,KAAO","names":[]}
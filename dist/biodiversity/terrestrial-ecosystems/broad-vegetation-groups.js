"use strict";document.addEventListener("DOMContentLoaded",function(){soefinding.findingJson.data.sort(function(e,n){return e["Broad vegetation group number"]-n["Broad vegetation group number"]});let s=soefinding.findingJson.meta.fields.slice(-2),o={};soefinding.findingJson.data.forEach(e=>{e.name=`${e["Broad vegetation group number"]}. ${e["Broad vegetation group label"].replace("-","\u2014")}`,soefinding.findingContent[e.Bioregion]||(soefinding.findingContent[e.Bioregion]={series1:s.map(n=>({name:n,data:[]})),groups:[],series2:s.map(n=>0)}),s.forEach((n,i)=>{soefinding.findingContent[e.Bioregion].series1[i].data.push(e[n]),soefinding.findingContent[e.Bioregion].series2[i]+=e[n]}),soefinding.findingContent[e.Bioregion].groups.push(e.name),o[e.name]||(o[e.name]=s.map(n=>0)),s.forEach((n,i)=>o[e.name][i]+=e[n])}),soefinding.findingContent.Queensland={series1:s.map((e,n)=>({name:e,data:Object.keys(o).map(i=>o[i][n])})),groups:Object.keys(o),series2:s.map((e,n)=>Object.keys(o).reduce((i,r)=>i+o[r][n],0))};let t=soefinding.getDefaultColumnChartOptions();t.chart.id="chart1",t.tooltip.y={formatter:e=>e.toLocaleString()},t.xaxis.categories=soefinding.findingContent[soefinding.state.currentRegionName].groups,t.xaxis.labels.trim=!0,t.xaxis.labels.hideOverlappingLabels=!1,t.xaxis.tickPlacement="between",t.xaxis.title.text="Hectares",t.yaxis.labels.formatter=e=>e>=1e6?`${e/1e6}M`:`${e/1e3}k`,t.yaxis.title.text="Broad Vegetation Group",soefinding.state.chart1={options:t,series:soefinding.findingContent[soefinding.state.currentRegionName].series1,chartactive:!0};let a=soefinding.getDefaultPieChartOptions();a.chart.type="donut",a.chart.id="chart2",a.labels=s,a.xaxis.categories=["Type","Area (ha)"],a.tooltip={y:{formatter:(e,n)=>{let i=n.globals.seriesPercent[n.seriesIndex][0];return`${e.toLocaleString()} (${i.toFixed(1)}%)`}}},soefinding.state.chart2={options:a,series:soefinding.findingContent[soefinding.state.currentRegionName].series2,chartactive:!0},new Vue({el:"#chartContainer",data:soefinding.state,computed:{heading1:()=>`Hectares of broad vegetation groups in protected areas in ${soefinding.state.currentRegionName}, 2017  TODO fix year`,heading2:()=>`Proportion of total remnant vegetation in protected areas in ${soefinding.state.currentRegionName}, 2017 TODO fix year`},methods:{formatter1:e=>e.toLocaleString()}}),window.soefinding.onRegionChange=function(){ApexCharts.exec("chart1","updateSeries",this.findingContent[this.state.currentRegionName].series1),soefinding.state.chart1.series=this.findingContent[this.state.currentRegionName].series1,ApexCharts.exec("chart1","updateOptions",{xaxis:{categories:this.findingContent[this.state.currentRegionName].groups}},!0),t.xaxis.categories=this.findingContent[this.state.currentRegionName].groups,ApexCharts.exec("chart2","updateSeries",this.findingContent[this.state.currentRegionName].series2),soefinding.state.chart2.series=this.findingContent[this.state.currentRegionName].series2,soefinding.loadFindingHtml()}});
//# sourceMappingURL=broad-vegetation-groups.js.map
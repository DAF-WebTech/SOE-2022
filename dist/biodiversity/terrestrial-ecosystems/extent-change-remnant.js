"use strict";document.addEventListener("DOMContentLoaded",function(){const years=soefinding.findingJson.meta.fields.slice(4);const latestYear=years.at(-1);soefinding.findingJson.data.sort(function(a,b){return b[latestYear]-a[latestYear]});const bioregions={};const qldData=[];soefinding.findingJson.data.forEach(d=>{d["Broad vegetation group label"]=`${d["Broad vegetation group number"]}. ${d["Broad vegetation group label"].replace("-","\u2014")}`;if(!bioregions[d.Bioregion]){bioregions[d.Bioregion]=[]}bioregions[d.Bioregion].push(d);let qldGroup=qldData.find(q=>q["Broad vegetation group label"]==d["Broad vegetation group label"]);if(!qldGroup){qldGroup={"Broad vegetation group label":d["Broad vegetation group label"],[latestYear]:0};qldData.push(qldGroup)}qldGroup[latestYear]+=d[latestYear]});for(const bioregion in bioregions){soefinding.findingContent[bioregion]={series1:bioregions[bioregion].map(d=>{return d[latestYear]}),labels1:bioregions[bioregion].map(d=>d["Broad vegetation group label"])}}qldData.sort(function(a,b){return b[latestYear]-a[latestYear]});soefinding.findingContent.Queensland={series1:qldData.map(d=>d[latestYear]),labels1:qldData.map(d=>d["Broad vegetation group label"])};const options1=soefinding.getDefaultPieChartOptions();options1.chart.id="chart1";options1.labels=soefinding.findingContent[soefinding.state.currentRegionName].labels1;options1.tooltip={y:{formatter:(val,options)=>{const percent=options.globals.seriesPercent[options.seriesIndex][0];return`${val.toLocaleString()} ha. (${percent.toFixed(1)}%)`}}};options1.xaxis.categories=["Broad vegetation group","Hectares"];soefinding.state.chart1={options:options1,series:soefinding.findingContent[soefinding.state.currentRegionName].series1,chartactive:true};const seriesNames=["Pre-clear vegetation",latestYear];for(const bioregion in bioregions){bioregions[bioregion].sort(function(a,b){return a["Broad vegetation group number"]-b["Broad vegetation group number"]});soefinding.findingContent[bioregion].series2=seriesNames.map(s=>{return{name:s,data:bioregions[bioregion].map(d=>d[s])}});soefinding.findingContent[bioregion].labels2=bioregions[bioregion].map(d=>d["Broad vegetation group label"])}soefinding.findingContent.Queensland.series2=soefinding.findingContent["Wet Tropics"].series2;soefinding.findingContent.Queensland.labels2=soefinding.findingContent["Wet Tropics"].labels2;const options2=soefinding.getDefaultColumnChartOptions();options2.chart.id="chart2";options2.tooltip.y={formatter:val=>`${val.toLocaleString()}ha`};options2.xaxis.categories=soefinding.findingContent[soefinding.state.currentRegionName].labels2;options2.xaxis.labels.trim=true,options2.xaxis.labels.hideOverlappingLabels=false;options2.xaxis.tickPlacement="between";options2.xaxis.title.text="Broad Vegetation Group";options2.yaxis.labels.formatter=val=>`${val/1e6}M`;options2.yaxis.title.text="Hectares";soefinding.state.chart2={options:options2,series:soefinding.findingContent[soefinding.state.currentRegionName].series2,chartactive:true};const data3=JSON.parse(document.getElementById("jsonData3").textContent);const keys=data3.meta.fields.slice(3);const lastKey=keys.at(-1);const qldItem3={};for(let bioregion in bioregions){const regionData=data3.data.filter(d=>d.Bioregion==bioregion);soefinding.findingContent[bioregion].series3=regionData.map(d=>{const name=`${d["Broad vegetation group number"]}. ${d["Broad vegetation group label"]}`;if(!qldItem3[name])qldItem3[name]=keys.map(k=>0);qldItem3[name].forEach((q,i)=>qldItem3[name][i]+=d[keys[i]]);return{name,data:keys.map(k=>d[k])}})}soefinding.findingContent.Queensland.series3=Object.keys(qldItem3).map(q=>{return{name:q.replace("-","\u2014"),data:qldItem3[q]}});soefinding.findingContent.Queensland.series3.sort(function(a,b){return parseInt(a.name.substring(0,a.name.indexOf(".")))-parseInt(b.name.substring(0,b.name.indexOf(".")))});const options3=soefinding.getDefaultStackedColumnChartOptions();options3.chart.height=600;options3.chart.id="chart3";options3.legend.inverseOrder=false;options3.legend.offsetY=20;options3.legend.position="bottom";options3.tooltip.y={formatter:val=>val.toLocaleString()};options3.xaxis.categories=keys.map(k=>[k.substring(0,k.indexOf("-"))+"\u2013",k.substring(k.indexOf("-")+1)]);delete options3.xaxis.tickPlacement;options3.xaxis.title.text="Year";options3.yaxis.labels.formatter=val=>val>=1e6?`${val/1e6}M`:`${val/1e3}k`;options3.yaxis.labels.minWidth=30;options3.yaxis.title.text="Hectares lost";options3.tooltip.shared=false;soefinding.state.chart3={options:options3,series:soefinding.findingContent[soefinding.state.currentRegionName].series3,chartactive:true};new Vue({el:"#chartContainer",data:soefinding.state,computed:{heading1:()=>`Proportion of broad vegetation groups in ${soefinding.state.currentRegionName}, ${latestYear}`,heading2:()=>`Pre-clear and ${latestYear} extents of broad vegetation groups in ${soefinding.state.currentRegionName}`,heading3:function(){let retVal="Change in extent of broad vegetation groups";if(this.currentRegionName!="Queensland")retVal+=` in ${this.currentRegionName}`;return retVal}},methods:{formatter1:val=>val.toLocaleString(),onStackedRadioClick:function(){this.chart3.options.chart.type="bar";this.chart3.options.chart.stacked=true},onLineRadioClick:function(){this.chart3.options.chart.type="line";this.chart3.options.chart.stacked=false;this.chart3.options.markers={size:4};this.chart3.options.tooltip.shared=false}}});window.soefinding.onRegionChange=function(){soefinding.state.chart1.series=this.findingContent[this.state.currentRegionName].series1;soefinding.state.chart1.options.labels=this.findingContent[this.state.currentRegionName].labels1;ApexCharts.exec("chart1","updateOptions",{labels:this.findingContent[this.state.currentRegionName].labels1});if(this.state.currentRegionName!="Queensland"){soefinding.state.chart2.series=this.findingContent[this.state.currentRegionName].series2;soefinding.state.chart2.options.xaxis.categories=this.findingContent[this.state.currentRegionName].labels2;ApexCharts.exec("chart2","updateOptions",{xaxis:{categories:this.findingContent[this.state.currentRegionName].labels2}})}soefinding.state.chart3.series=this.findingContent[this.state.currentRegionName].series3;soefinding.loadFindingHtml()}});
//# sourceMappingURL=extent-change-remnant.js.map
{"version":3,"sources":["../../../src/climate/coasts-oceans/storm-tide-inundation.js"],"sourcesContent":["\"use strict\"\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n\t// group cyclones\r\n\tconst cyclones = {}\r\n\tsoefinding.findingJson.data.forEach(d => {\r\n\t\tif (!cyclones[d.Cyclone])\r\n\t\t\tcyclones[d.Cyclone] = []\r\n\t\tcyclones[d.Cyclone].push(d)\r\n\t})\r\n\r\n\r\n\tconst keys = soefinding.findingJson.meta.fields.slice(3)\r\n\tconst options = soefinding.getDefaultBarChartOptions()\r\n\toptions.xaxis.tickPlacement = \"between\"\r\n\toptions.xaxis.title.text = \"Incident\"\r\n\toptions.yaxis.title.text = \"Metres\"\r\n\toptions.yaxis.forceNiceScale = false\r\n\r\n\r\n\tObject.keys(cyclones).forEach((c, i) => {\r\n\t\tconst data = [[], []]\r\n\t\tconst names = []\r\n\t\tcyclones[c].forEach((d, i) => {\r\n\t\t\tconst date = new Date(d.Date)\r\n\t\t\tnames.push([d.Location, `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`])\r\n\t\t\tdata[0].push(d[keys[0]])\r\n\t\t\tdata[1].push(d[keys[1]])\r\n\t\t})\r\n\t\tconst series = keys.map((k, i) => {\r\n\t\t\treturn {\r\n\t\t\t\tname: k.substring(0, k.indexOf(\"(\")),\r\n\t\t\t\tdata: data[i]\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tconst myOptions = JSON.parse(JSON.stringify(options))\r\n\t\tmyOptions.xaxis.categories = names\r\n\t\tmyOptions.tooltip.y = {\r\n\t\t\tformatter: function (val) {\r\n\t\t\t\treturn val < 0 ? `−${Math.abs(val)}` : val // use correct unicode\r\n\t\t\t},\r\n\t\t}\r\n\r\n\r\n\t\tswitch (i) {\r\n\t\t\tcase 0:\r\n\t\t\t\tmyOptions.yaxis.min = -0.5\r\n\t\t\t\tmyOptions.yaxis.max = 2.0\r\n\t\t\t\tmyOptions.yaxis.tickAmount = 5\r\n\t\t\t\tmyOptions.yaxis.labels.formatter = val => val.toFixed(1)\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\tmyOptions.yaxis.min = -0.25\r\n\t\t\t\tmyOptions.yaxis.max = 1.25\r\n\t\t\t\tmyOptions.yaxis.tickAmount = 6\r\n\t\t\t\tmyOptions.yaxis.labels.formatter = val => val.toFixed(2)\r\n\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\tmyOptions.yaxis.min = -0.2\r\n\t\t\t\tmyOptions.yaxis.max = 1.0\r\n\t\t\t\tmyOptions.yaxis.tickAmount = 6\r\n\t\t\t\tmyOptions.yaxis.labels.formatter = val => val.toFixed(1)\r\n\r\n\t\t\t\tbreak\r\n\t\t}\r\n\r\n\r\n\t\tsoefinding.state[`chart${i + 1}`] = {\r\n\t\t\toptions: myOptions,\r\n\t\t\tseries: series,\r\n\t\t\tchartactive: true,\r\n\t\t}\r\n\r\n\t})\r\n\r\n\t// chart 4, just a plain table, not using component\r\n\tsoefinding.state.chart4 = {\r\n\t\theadings: soefinding.findingJson.meta.fields,\r\n\t\tdata: soefinding.findingJson.data.map(d => soefinding.findingJson.meta.fields.map(f => {\r\n\t\t\tif (f == \"Date\") {\r\n\t\t\t\tconst date = new Date(d.Date)\r\n\t\t\t\treturn `${date.getDate()}/${date.getMonth() + 1}/${date.getFullYear()}`\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn d[f]\r\n\t\t})\r\n\t\t)\r\n\t};\r\n\r\n\r\n\r\n\tnew Vue({\r\n\t\tel: \"#chartContainer\",\r\n\t\tdata: soefinding.state,\r\n\t\tcomputed: {\r\n\t\t\theading1: () => `Cyclone ${Object.keys(cyclones)[0]}`,\r\n\t\t\theading2: () => `Cyclone ${Object.keys(cyclones)[1]}`,\r\n\t\t\theading3: () => `Cyclone ${Object.keys(cyclones)[2]}`,\r\n\t\t\theading4: () => \"Storm tide inundation incidences, 2018–2019\",\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tformatter1: val => { \r\n\t\t\t\tconst sign = val < 0 ? \"−\" : \"\" // use correct unicode\r\n\t\t\t\tconst amount = Math.abs(val).toFixed(2)\r\n\t\t\t\treturn sign + amount\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\r\n})\r\n"],"mappings":"aAEA,SAAS,iBAAiB,mBAAoB,UAAY,CAGzD,KAAM,UAAW,GACjB,WAAW,YAAY,KAAK,QAAQ,GAAK,CACxC,GAAI,CAAC,SAAS,EAAE,SACf,SAAS,EAAE,SAAW,GACvB,SAAS,EAAE,SAAS,KAAK,KAI1B,KAAM,MAAO,WAAW,YAAY,KAAK,OAAO,MAAM,GACtD,KAAM,SAAU,WAAW,4BAC3B,QAAQ,MAAM,cAAgB,UAC9B,QAAQ,MAAM,MAAM,KAAO,WAC3B,QAAQ,MAAM,MAAM,KAAO,SAC3B,QAAQ,MAAM,eAAiB,MAG/B,OAAO,KAAK,UAAU,QAAQ,CAAC,EAAG,IAAM,CACvC,KAAM,MAAO,CAAC,GAAI,IAClB,KAAM,OAAQ,GACd,SAAS,GAAG,QAAQ,CAAC,EAAG,KAAM,CAC7B,KAAM,MAAO,GAAI,MAAK,EAAE,MACxB,MAAM,KAAK,CAAC,EAAE,SAAU,GAAG,KAAK,aAAa,KAAK,WAAa,KAAK,KAAK,kBACzE,KAAK,GAAG,KAAK,EAAE,KAAK,KACpB,KAAK,GAAG,KAAK,EAAE,KAAK,OAErB,KAAM,QAAS,KAAK,IAAI,CAAC,EAAG,KAAM,CACjC,MAAO,CACN,KAAM,EAAE,UAAU,EAAG,EAAE,QAAQ,MAC/B,KAAM,KAAK,OAIb,KAAM,WAAY,KAAK,MAAM,KAAK,UAAU,UAC5C,UAAU,MAAM,WAAa,MAC7B,UAAU,QAAQ,EAAI,CACrB,UAAW,SAAU,IAAK,CACzB,MAAO,KAAM,EAAI,SAAI,KAAK,IAAI,OAAS,MAKzC,OAAQ,OACF,GACJ,UAAU,MAAM,IAAM,IACtB,UAAU,MAAM,IAAM,EACtB,UAAU,MAAM,WAAa,EAC7B,UAAU,MAAM,OAAO,UAAY,KAAO,IAAI,QAAQ,GACtD,UAEI,GACJ,UAAU,MAAM,IAAM,KACtB,UAAU,MAAM,IAAM,KACtB,UAAU,MAAM,WAAa,EAC7B,UAAU,MAAM,OAAO,UAAY,KAAO,IAAI,QAAQ,GAEtD,UAEI,GACJ,UAAU,MAAM,IAAM,IACtB,UAAU,MAAM,IAAM,EACtB,UAAU,MAAM,WAAa,EAC7B,UAAU,MAAM,OAAO,UAAY,KAAO,IAAI,QAAQ,GAEtD,MAIF,WAAW,MAAM,QAAQ,EAAI,KAAO,CACnC,QAAS,UACT,OACA,YAAa,QAMf,WAAW,MAAM,OAAS,CACzB,SAAU,WAAW,YAAY,KAAK,OACtC,KAAM,WAAW,YAAY,KAAK,IAAI,GAAK,WAAW,YAAY,KAAK,OAAO,IAAI,GAAK,CACtF,GAAI,GAAK,OAAQ,CAChB,KAAM,MAAO,GAAI,MAAK,EAAE,MACxB,MAAO,GAAG,KAAK,aAAa,KAAK,WAAa,KAAK,KAAK,oBAGxD,OAAO,GAAE,OAOZ,GAAI,KAAI,CACP,GAAI,kBACJ,KAAM,WAAW,MACjB,SAAU,CACT,SAAU,IAAM,WAAW,OAAO,KAAK,UAAU,KACjD,SAAU,IAAM,WAAW,OAAO,KAAK,UAAU,KACjD,SAAU,IAAM,WAAW,OAAO,KAAK,UAAU,KACjD,SAAU,IAAM,oDAEjB,QAAS,CACR,WAAY,KAAO,CAClB,KAAM,MAAO,IAAM,EAAI,SAAM,GAC7B,KAAM,QAAS,KAAK,IAAI,KAAK,QAAQ,GACrC,MAAO,MAAO","names":[]}
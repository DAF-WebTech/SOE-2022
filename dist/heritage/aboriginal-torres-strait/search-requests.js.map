{"version":3,"sources":["../../../src/heritage/aboriginal-torres-strait/search-requests.js"],"sourcesContent":["\"use strict\"\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n\tconst yearKeys = soefinding.findingJson.meta.fields.slice(1)\r\n\tconst latestYear = yearKeys[yearKeys.length - 1]\r\n\r\n\tsoefinding.findingJson.data.sort(function (a, b) {\r\n\t\treturn b[latestYear] - a[latestYear]\r\n\t})\r\n\r\n\r\n\tconst series1 = soefinding.findingJson.data.map(d => {\r\n\t\treturn {\r\n\t\t\tname: d.Category,\r\n\t\t\tdata: yearKeys.map(y => d[y])\r\n\t\t}\r\n\t})\r\n\r\n\tconst options1 = soefinding.getDefaultStackedColumnChartOptions()\r\n\toptions1.legend.inverseOrder = true\r\n\toptions1.xaxis.categories = yearKeys\r\n\toptions1.xaxis.title.text = \"Year\"\r\n\toptions1.yaxis.title.text = \"Number of requests\"\r\n\toptions1.yaxis.labels.formatter = val => `${val / 1000}k`\r\n\toptions1.tooltip.y = { formatter: val => val.toLocaleString() } \r\n\r\n\tsoefinding.state.chart1 = {\r\n\t\toptions: options1,\r\n\t\tseries: series1,\r\n\t\tchartactive: true,\r\n\t};\r\n\r\n\r\n\tconst series2 = soefinding.findingJson.data.map(d => d[latestYear])\r\n\r\n\tconst options2 = soefinding.getDefaultPieChartOptions()\r\n\toptions2.labels = soefinding.findingJson.data.map(d => d.Category) // the pie charts uses labels, but the table vue is looking for categories\r\n\toptions2.xaxis.categories = [\"Category\", \"Searches\"] // not needed for chart, but vue uses them for table headings\r\n\toptions2.tooltip = {\r\n\t\ty: {\r\n\t\t\tformatter: (val, options) => {\r\n\t\t\t\tconst percent = options.globals.seriesPercent[options.seriesIndex][0]\r\n\t\t\t\treturn `${val.toLocaleString()} (${percent.toFixed(1)}%)`\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsoefinding.state.chart2 = {\r\n\t\toptions: options2,\r\n\t\tseries: series2,\r\n\t\tchartactive: true,\r\n\t}\r\n\r\n\t//todo, we will need to rewrite this page to accommodate the expected regions\r\n\t//this is just to make sure the page works without error\r\n\tsoefinding.regionNames.forEach(r => soefinding.findingContent[r] = {})\r\n\r\n\r\n\tnew Vue({\r\n\t\tel: \"#chartContainer\",\r\n\t\tdata: soefinding.state,\r\n\t\tcomputed: {\r\n\t\t\theading1: () => \"Number of cultural heritage search requests, by category\",\r\n\t\t\theading2: () => `Proportion of cultural heritage search requests by category, ${latestYear}`\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tformatter1: val => val.toLocaleString()\r\n\t\t}\r\n\t})\r\n\t\r\n\twindow.soefinding.onRegionChange = function () {\r\n\t\tsoefinding.loadFindingHtml()\r\n\t}\r\n\r\n\r\n})\r\n"],"mappings":"aAEA,SAAS,iBAAiB,mBAAoB,UAAY,CAEzD,GAAM,GAAW,WAAW,YAAY,KAAK,OAAO,MAAM,GACpD,EAAa,EAAS,EAAS,OAAS,GAE9C,WAAW,YAAY,KAAK,KAAK,SAAU,EAAG,EAAG,CAChD,MAAO,GAAE,GAAc,EAAE,KAI1B,GAAM,GAAU,WAAW,YAAY,KAAK,IAAI,GACxC,EACN,KAAM,EAAE,SACR,KAAM,EAAS,IAAI,GAAK,EAAE,OAItB,EAAW,WAAW,sCAC5B,EAAS,OAAO,aAAe,GAC/B,EAAS,MAAM,WAAa,EAC5B,EAAS,MAAM,MAAM,KAAO,OAC5B,EAAS,MAAM,MAAM,KAAO,qBAC5B,EAAS,MAAM,OAAO,UAAY,GAAO,GAAG,EAAM,OAClD,EAAS,QAAQ,EAAI,CAAE,UAAW,GAAO,EAAI,kBAE7C,WAAW,MAAM,OAAS,CACzB,QAAS,EACT,OAAQ,EACR,YAAa,IAId,GAAM,GAAU,WAAW,YAAY,KAAK,IAAI,GAAK,EAAE,IAEjD,EAAW,WAAW,4BAC5B,EAAS,OAAS,WAAW,YAAY,KAAK,IAAI,GAAK,EAAE,UACzD,EAAS,MAAM,WAAa,CAAC,WAAY,YACzC,EAAS,QAAU,CAClB,EAAG,CACF,UAAW,CAAC,EAAK,IAAY,CAC5B,GAAM,GAAU,EAAQ,QAAQ,cAAc,EAAQ,aAAa,GACnE,MAAO,GAAG,EAAI,qBAAqB,EAAQ,QAAQ,UAKtD,WAAW,MAAM,OAAS,CACzB,QAAS,EACT,OAAQ,EACR,YAAa,IAKd,WAAW,YAAY,QAAQ,GAAK,WAAW,eAAe,GAAK,IAGnE,GAAI,KAAI,CACP,GAAI,kBACJ,KAAM,WAAW,MACjB,SAAU,CACT,SAAU,IAAM,2DAChB,SAAU,IAAM,gEAAgE,KAEjF,QAAS,CACR,WAAY,GAAO,EAAI,oBAIzB,OAAO,WAAW,eAAiB,UAAY,CAC9C,WAAW","names":[]}
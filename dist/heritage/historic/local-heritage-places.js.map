{"version":3,"sources":["../../../src/heritage/historic/local-heritage-places.js"],"sourcesContent":["\"use strict\"\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n\r\n\tconst keys = soefinding.findingJson.meta.fields.slice(2)\r\n\tconst localPlaces = []\r\n\tconst series2 = []\r\n\tlet currentLga = \"\"\r\n\tsoefinding.findingContent.Queensland = { series3: null }\r\n\r\n\r\n\t//iterate the data and group them in to each series\r\n\tsoefinding.findingJson.data.forEach(d => {\r\n\t\t// if it has a value in the last column, it goes into the qld pie chart\r\n\t\tif (d[keys[2]] > 0)\r\n\t\t\tlocalPlaces.push(d)\r\n\r\n\t\t// all items go into qld table, we concatenate lga name and first key\r\n\t\tlet name = d.LGA\r\n\t\tif (d[\"Planning scheme\"])\r\n\t\t\tname += ` (${d[\"Planning scheme\"]})`\r\n\t\tseries2.push({\r\n\t\t\tname,\r\n\t\t\tdata: keys.map(k => d[k])\r\n\t\t})\r\n\r\n\r\n\t\tif (currentLga != d.LGA) {\r\n\t\t\t// first time seeing this LGA\r\n\t\t\tsoefinding.findingContent[d.LGA] = {\r\n\t\t\t\tseries3: [{\r\n\t\t\t\t\tname: d[\"Planning scheme\"],\r\n\t\t\t\t\tdata: keys.map(k => d[k])\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// saw this lga previously\r\n\t\t\tsoefinding.findingContent[d.LGA].series3.push({\r\n\t\t\t\tname: d[\"Planning scheme\"],\r\n\t\t\t\tdata: keys.map(k => d[k])\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tcurrentLga = d.LGA\r\n\r\n\t})\r\n\r\n\r\n\t// fix the qld series\r\n\tlocalPlaces.sort(function (a, b) {\r\n\t\treturn b[keys[2]] - a[keys[2]]\r\n\t})\r\n\tconst series1 = localPlaces.map(p => p[keys[2]])\r\n\r\n\tseries2.sort(function (a, b) {\r\n\t\treturn b.data[0] - a.data[0]\r\n\t})\r\n\r\n\r\n\r\n\tconst options1 = soefinding.getDefaultPieChartOptions()\r\n\toptions1.labels = localPlaces.map(p => p.LGA)\r\n\toptions1.tooltip = {\r\n\t\ty: {\r\n\t\t\tformatter: (val, options) => {\r\n\t\t\t\tconst percent = options.globals.seriesPercent[options.seriesIndex][0]\r\n\t\t\t\treturn `${val.toLocaleString()} (${percent.toFixed(1)}%)`\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\toptions1.xaxis.categories = [\"LGA\", keys[2].replace(\"identified\", \"identified<br>\")\r\n\t]\r\n\r\n\tsoefinding.state.chart1 = {\r\n\t\tseries: series1,\r\n\t\toptions: options1,\r\n\t\tchartactive: true,\r\n\t}\r\n\r\n\tconst options2 = {\r\n\t\txaxis: {\r\n\t\t\tcategories: keys\r\n\t\t}\r\n\t}\r\n\tsoefinding.state.chart2 = {\r\n\t\tseries: series2,\r\n\t\toptions: options2,\r\n\t\tchartactive: false,\r\n\t}\r\n\r\n\r\n\tsoefinding.state.chart3 = {\r\n\t\tseries: soefinding.findingContent[soefinding.state.currentRegionName].series3,\r\n\t\toptions: options2,\r\n\t\tchartactive: false,\r\n\t}\r\n\r\n\r\n\tnew Vue({\r\n\t\tel: \"#chartContainer\",\r\n\t\tdata: soefinding.state,\r\n\t\tcomputed: {\r\n\t\t\theading1: () => \"Proportion of local heritage places on local heritage registers by local government area, 2020 (TODO fix year)\",\r\n\t\t\theading2: function () {\r\n\t\t\t\treturn `Local heritage places and areas by planning scheme in ${this.currentRegionName} Local Government Area`\r\n\t\t\t},\r\n\t\t\theading3: function () {\r\n\t\t\t\treturn `Local heritage places and areas by planning scheme in ${this.currentRegionName}`\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tformatter1: val => val.toLocaleString(),\r\n\t\t}\r\n\t})\r\n\r\n\r\n\twindow.soefinding.onRegionChange = function () {\r\n\t\tsoefinding.state.chart3.series = this.findingContent[this.state.currentRegionName].series3\r\n\t\tsoefinding.loadFindingHtml();\r\n\t}\r\n\r\n})"],"mappings":"aACA,SAAS,iBAAiB,mBAAoB,UAAY,CAGzD,KAAM,MAAO,WAAW,YAAY,KAAK,OAAO,MAAM,GACtD,KAAM,aAAc,GACpB,KAAM,SAAU,GAChB,GAAI,YAAa,GACjB,WAAW,eAAe,WAAa,CAAE,QAAS,MAIlD,WAAW,YAAY,KAAK,QAAQ,GAAK,CAExC,GAAI,EAAE,KAAK,IAAM,EAChB,YAAY,KAAK,GAGlB,GAAI,MAAO,EAAE,IACb,GAAI,EAAE,mBACL,MAAQ,KAAK,EAAE,sBAChB,QAAQ,KAAK,CACZ,KACA,KAAM,KAAK,IAAI,GAAK,EAAE,MAIvB,GAAI,YAAc,EAAE,IAAK,CAExB,WAAW,eAAe,EAAE,KAAO,CAClC,QAAS,CAAC,CACT,KAAM,EAAE,mBACR,KAAM,KAAK,IAAI,GAAK,EAAE,WAIpB,CAEJ,WAAW,eAAe,EAAE,KAAK,QAAQ,KAAK,CAC7C,KAAM,EAAE,mBACR,KAAM,KAAK,IAAI,GAAK,EAAE,MAIxB,WAAa,EAAE,MAMhB,YAAY,KAAK,SAAU,EAAG,EAAG,CAChC,MAAO,GAAE,KAAK,IAAM,EAAE,KAAK,MAE5B,KAAM,SAAU,YAAY,IAAI,GAAK,EAAE,KAAK,KAE5C,QAAQ,KAAK,SAAU,EAAG,EAAG,CAC5B,MAAO,GAAE,KAAK,GAAK,EAAE,KAAK,KAK3B,KAAM,UAAW,WAAW,4BAC5B,SAAS,OAAS,YAAY,IAAI,GAAK,EAAE,KACzC,SAAS,QAAU,CAClB,EAAG,CACF,UAAW,CAAC,IAAK,UAAY,CAC5B,KAAM,SAAU,QAAQ,QAAQ,cAAc,QAAQ,aAAa,GACnE,MAAO,GAAG,IAAI,qBAAqB,QAAQ,QAAQ,UAItD,SAAS,MAAM,WAAa,CAAC,MAAO,KAAK,GAAG,QAAQ,aAAc,mBAGlE,WAAW,MAAM,OAAS,CACzB,OAAQ,QACR,QAAS,SACT,YAAa,MAGd,KAAM,UAAW,CAChB,MAAO,CACN,WAAY,OAGd,WAAW,MAAM,OAAS,CACzB,OAAQ,QACR,QAAS,SACT,YAAa,OAId,WAAW,MAAM,OAAS,CACzB,OAAQ,WAAW,eAAe,WAAW,MAAM,mBAAmB,QACtE,QAAS,SACT,YAAa,OAId,GAAI,KAAI,CACP,GAAI,kBACJ,KAAM,WAAW,MACjB,SAAU,CACT,SAAU,IAAM,iHAChB,SAAU,UAAY,CACrB,MAAO,yDAAyD,KAAK,2CAEtE,SAAU,UAAY,CACrB,MAAO,yDAAyD,KAAK,sBAGvE,QAAS,CACR,WAAY,KAAO,IAAI,oBAKzB,OAAO,WAAW,eAAiB,UAAY,CAC9C,WAAW,MAAM,OAAO,OAAS,KAAK,eAAe,KAAK,MAAM,mBAAmB,QACnF,WAAW","names":[]}
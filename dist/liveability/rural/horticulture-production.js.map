{"version":3,"sources":["../../../src/liveability/rural/horticulture-production.js"],"sourcesContent":["\"use strict\"\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n\tconst header = soefinding.findingJson.data.shift()\r\n\tconst region_key = 0\r\n\tconst product_key = 3\r\n\tconst product_year_keys = [4, 5, 6]\r\n\tconst product_years = product_year_keys.map(yk => header[yk])\r\n\tconst value_year_keys = [8, 9, 10]\r\n\tconst value_years = value_year_keys.map(yk => header[yk])\r\n\r\n\tconst nullRegions = [\r\n\t\t\t\"Queensland\", \"Cape York\", \"Desert Channels\",\r\n\t\t\t\"Fitzroy Basin\", \"Northern Gulf\", \"Reef\",\r\n\t\t\t\"Southern Gulf\", \"Southern Queensland\", \"Torres Strait\"]\r\n\tnullRegions.forEach(n => soefinding.findingContent[n] = {})\r\n\r\n\tconst regions = new Map() // we use this in chart 3\r\n\r\n\t// chart 1 column charts for fruits\r\n\tconst fruitSeries = soefinding.findingJson.data.filter(d => d[product_key] == \"Fruit\")\r\n\tfruitSeries.forEach(d => {\r\n\r\n\t\tregions.set(d[region_key], [d])  // for chart 3\r\n\r\n\t\tsoefinding.findingContent[d[region_key]] = {\r\n\t\t\tseries1: [{\r\n\t\t\t\tname: \"Tonnes\",\r\n\t\t\t\tdata: product_year_keys.map(yk => d[yk])\r\n\t\t\t}]\r\n\t\t}\r\n\t})\r\n\r\n\tconst columnChartOptions = soefinding.getDefaultColumnChartOptions()\r\n\tcolumnChartOptions.xaxis.categories = product_years.map(k => k.replace(\"-\", \"–\")) // ndash\r\n\tcolumnChartOptions.xaxis.title.text = \"Year\"\r\n\tcolumnChartOptions.yaxis.title.text = \"Tonnes\"\r\n\tcolumnChartOptions.yaxis.labels.formatter = val => val >= 1000000 ? `${val / 1000000}M` : (val >= 1000 ? `${val / 1000}K` : val)\r\n\tcolumnChartOptions.tooltip.y = { formatter: val => val.toLocaleString() }\r\n\r\n\r\n\tsoefinding.state.chart1 = {\r\n\t\tseries: soefinding.findingContent[soefinding.state.currentRegionName].series1 ?? null,\r\n\t\toptions: columnChartOptions,\r\n\t\tchartactive: true,\r\n\t}\r\n\r\n\r\n\t// chart 2 column charts for vegetables\r\n\tconst vegetableSeries = soefinding.findingJson.data.filter(d => d[product_key] == \"Vegetables\")\r\n\tvegetableSeries.forEach(d => {\r\n\r\n\t\tregions.get(d[region_key]).push(d) // for chart 3\r\n\r\n\t\tsoefinding.findingContent[d[region_key]].series2 =\r\n\t\t\t[{\r\n\t\t\t\tname: \"Tonnes\",\r\n\t\t\t\tdata: product_year_keys.map(yk => d[yk])\r\n\t\t\t}]\r\n\t})\r\n\r\n\tsoefinding.state.chart2 = {\r\n\t\tseries: soefinding.findingContent[soefinding.state.currentRegionName].series2 ?? null,\r\n\t\toptions: columnChartOptions,\r\n\t\tchartactive: true,\r\n\t}\r\n\r\n\r\n\r\n\t// chart 3, line chart for values\r\n\tfor (let [regionName, data] of regions) {\r\n\t\tsoefinding.findingContent[regionName].series3 =\r\n\t\t\tdata.map(d => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: d[product_key],\r\n\t\t\t\t\tdata: value_year_keys.map(vyk => d[vyk])\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t}\r\n\r\n\r\n\tconst lineChartOptions = soefinding.getDefaultLineChartOptions()\r\n\tlineChartOptions.xaxis.categories = product_years.map(k => k.replace(\"-\", \"–\")) // ndash\r\n\tlineChartOptions.xaxis.title.text = \"Year\"\r\n\tlineChartOptions.xaxis.tickPlacement = \"between\"\r\n\tlineChartOptions.tooltip.y = { formatter: val => `$${val.toLocaleString()}` }\r\n\tlineChartOptions.yaxis.title.text = \"Value ($)\"\r\n\tlineChartOptions.yaxis.labels.minWidth = 30\r\n\tlineChartOptions.yaxis.labels.formatter = columnChartOptions.yaxis.labels.formatter\r\n\r\n\tsoefinding.state.chart3 = {\r\n\t\tseries: soefinding.findingContent[soefinding.state.currentRegionName].series3 ?? null,\r\n\t\toptions: lineChartOptions,\r\n\t\tchartactive: true,\r\n\t}\r\n\r\n\r\n\r\n\tnew Vue({\r\n\t\tel: \"#chartContainer\",\r\n\t\tdata: soefinding.state,\r\n\t\tcomputed: {\r\n\t\t\theading1: function () { return `Production amount of Fruit in ${this.currentRegionName} NRM region` },\r\n\t\t\theading2: function () { return `Production amount of Vegetables in ${this.currentRegionName} NRM region` },\r\n\t\t\theading3: function () { return `Production values in ${this.currentRegionName} NRM region` }\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tformatter1: val => val.toLocaleString()\r\n\t\t}\r\n\t})\r\n\r\n\twindow.soefinding.onRegionChange = function () {\r\n\r\n\t\tsoefinding.state.chart1.series = soefinding.findingContent[soefinding.state.currentRegionName].series1\r\n\t\tsoefinding.state.chart2.series = soefinding.findingContent[soefinding.state.currentRegionName].series2\r\n\t\tsoefinding.state.chart3.series = soefinding.findingContent[soefinding.state.currentRegionName].series3\r\n\r\n\t\tsoefinding.loadFindingHtml()\r\n\t}\r\n\r\n})\r\n"],"mappings":"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","names":[]}
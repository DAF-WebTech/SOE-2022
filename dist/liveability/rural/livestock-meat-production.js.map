{"version":3,"sources":["../../../src/liveability/rural/livestock-meat-production.js"],"sourcesContent":["/*\r\nsoefinding.state.regionData = {\r\n\tregionName:  {\r\n\t\tsubregionName: {\r\n\t\t\tchart1: [ \r\n\t\t\t\t{ // column chart for each product\r\n\t\t\t\t\tproductName: \"\",\r\n\t\t\t\t\tseries: [],\r\n\t\t\t\t\toptions: {},\r\n\t\t\t\t\tchartactive: true\r\n\t\t\t\t}\r\n\t\t\t], \r\n\t\t\tchart2: {} // line chart for production values \r\n\t\t},\r\n\t\tsubregionName: {},\r\n\t},\r\n\tregionName: {\r\n\t}\r\n}\r\n*/\r\n\r\n\"use strict\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n\tconst region_key = 0\r\n\tconst subregion_key = 1\r\n\tconst quantity_key = 2\r\n\tconst product_key = 3\r\n\tconst header = soefinding.findingJson.data.shift()\r\n\tconst year_keys = [4, 5, 6]\r\n\tconst years = year_keys.map(yk => header[yk])\r\n\r\n\tconst year_keys_value = [8, 9, 10]\r\n\tconst years_value = year_keys_value.map(yk => header[yk])\r\n\r\n\t// group by region and subregion\r\n\tsoefinding.findingContent = { Queensland: {} }\r\n\tsoefinding.state.regionData = {}\r\n\tsoefinding.findingJson.data.forEach(d => {\r\n\r\n\t\t// if it’s all nulls, then ignore it\r\n\t\tif (year_keys.map(yk => d[yk]).every(v => v == null))\r\n\t\t\treturn;\r\n\r\n\t\t\r\n\t\tif (d[subregion_key] == null) {\r\n\t\t\td[subregion_key] = d[region_key]\r\n\t\t}\r\n\r\n\t\tif (!soefinding.state.regionData[d[region_key]]) {\r\n\t\t\tsoefinding.state.regionData[d[region_key]] = {}\r\n\t\t\tsoefinding.findingContent[d[region_key]] = {html: \"\"}\r\n\t\t}\r\n\r\n\t\tif (!soefinding.state.regionData[d[region_key]][d[subregion_key]]) {\r\n\t\t\tsoefinding.state.regionData[d[region_key]][d[subregion_key]] = { \r\n\t\t\t\tdata: [],\r\n\t\t\t\tchart1: [],\r\n\t\t\t\tchart2: {}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// fix the data, replace n.p. with null\r\n\t\td.forEach(function(item, i) { \r\n\t\t\tif (String(item).indexOf(\"&\") >= 0) \r\n\t\t\t\td[i] = item.replace(\"&\", \"and\")\r\n\t\t})\r\n\r\n\t\tif (d[product_key] != \"Total\")\r\n\t\t\tsoefinding.state.regionData[d[region_key]][d[subregion_key]].data.push(d)\r\n\t})\r\n\r\n\tconst columnChartOptions = soefinding.getDefaultColumnChartOptions()\r\n\tcolumnChartOptions.xaxis.categories = years.map(k => k.replace(\"-\", \"–\")) // ndash\r\n\tcolumnChartOptions.xaxis.title.text = \"Year\"\r\n\tcolumnChartOptions.yaxis.title.text = \"Tonnes\"\r\n\tcolumnChartOptions.yaxis.labels.formatter = val => val >= 1000000 ? `${val/1000000}M` : ( val >= 1000 ? `${val/1000}K`: val)\r\n\tcolumnChartOptions.tooltip.y = { formatter: val => val.toLocaleString() }\r\n\r\n\tsoefinding.state.lineChartOptions = soefinding.getDefaultLineChartOptions()\r\n\r\n\r\n\tsoefinding.state.lineChartOptions.xaxis.categories = years_value.map(k => k.replace(\"-\", \"–\")) // ndash\r\n\tsoefinding.state.lineChartOptions.legend.showForNullSeries = false \r\n\tsoefinding.state.lineChartOptions.yaxis.showForNullSeries = false\r\n\tsoefinding.state.lineChartOptions.xaxis.title.text = \"Year\"\r\n\tsoefinding.state.lineChartOptions.xaxis.tickPlacement = \"between\"\r\n\tsoefinding.state.lineChartOptions.tooltip.y = { formatter: val => { \r\n\t\tif (val == null)\r\n\t\t\treturn \"n/a\"\r\n\t\telse\r\n\t\t\treturn `$${val.toLocaleString(undefined, {minimumFractionDigits: 2})}` \r\n\t}}\r\n\tsoefinding.state.lineChartOptions.yaxis.title.text = \"Value ($)\"\r\n\tsoefinding.state.lineChartOptions.yaxis.labels.minWidth = 30\r\n\tsoefinding.state.lineChartOptions.yaxis.labels.formatter = val => {\r\n\t\tif (val >= 1000000000)\r\n\t\t\treturn `${val/1000000000}B`\r\n\t\telse if (val >= 1000000)\r\n\t\t\treturn `${val/1000000}M`\r\n\t\telse if (val >= 1000)\r\n\t\t\treturn `${val/1000}K`\r\n\t\telse \r\n\t\t\treturn val\r\n\t}\r\n\r\n\r\n\t\r\n\tObject.keys(soefinding.state.regionData).forEach(function(regionName) {\r\n\t\tObject.keys(soefinding.state.regionData[regionName]).forEach(function(subregionName) {\r\n\r\n\t\t\tsoefinding.state.regionData[regionName][subregionName].chart1 = soefinding.state.regionData[regionName][subregionName].data.map(d => {\r\n\t\t\t\tlet heading = `Production amount of ${d[product_key]} in ${regionName} `\r\n\t\t\t\tif (regionName != \"Queensland\")\r\n\t\t\t\t\t heading += \"NRM region\"\r\n\t\t\t\tif (regionName != subregionName)\r\n\t\t\t\t\theading += ` — ${subregionName}` // mdash\r\n\r\n\t\t\t\tconst zeroSeries = year_keys.reduce( function (acc, curr) {\r\n\t\t\t\t\t\t\treturn acc + d[curr]\r\n\t\t\t\t\t\t}, 0) == 0\r\n\r\n\t\t\t\tconst options = JSON.parse(JSON.stringify(columnChartOptions))\r\n\t\t\t\toptions.yaxis.title.text = d[quantity_key]\r\n\t\t\t\toptions .tooltip.y = columnChartOptions.tooltip.y\r\n\t\t\t\toptions.yaxis.labels.formatter = columnChartOptions.yaxis.labels.formatter \r\n\r\n\t\t\t\treturn { // column chart for each product\r\n\t\t\t\t\t\tproductName: d[product_key],\r\n\t\t\t\t\t\theading,\r\n\t\t\t\t\t\tseries: [{name: \"Tonnes\", data: year_keys.map(yk => d[yk])}],\r\n\t\t\t\t\t\tchartactive: !zeroSeries,\r\n\t\t\t\t\t\tzeroSeries,\r\n\t\t\t\t\t\toptions\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// put together chart 2, one line chart per subregion\r\n\t\t\tlet heading2 = `Production values in ${regionName} `\r\n\t\t\tif (regionName != \"Queensland\")\r\n\t\t\t\theading2 += \"NRM region\"\r\n\t\t\tif (regionName != subregionName)\r\n\t\t\t\theading2 += ` — ${subregionName}`  // mdash\r\n\r\n\t\t\tsoefinding.state.regionData[regionName][subregionName].chart2 = {\r\n\t\t\t\theading2, \r\n\t\t\t\tseries: soefinding.state.regionData[regionName][subregionName].data.map(d => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tname: d[product_key],\r\n\t\t\t\t\t\tdata: year_keys_value.map(ykv => d[ykv])\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tchartactive: true\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n\r\n\r\n\tnew Vue({\r\n\t\tel: \"#chartContainer\",\r\n\t\tdata: soefinding.state,\r\n\t\tmethods: {\r\n\t\t\ttableCellFormatter: val => {\r\n\t\t\t\tif (val == null)\r\n\t\t\t\t\treturn \"n/a\"\r\n\t\t\t\telse if (val == 0)\r\n\t\t\t\t\treturn \"0\"\r\n\t\t\t\telse\r\n\t\t\t\t\treturn val.toLocaleString(undefined, {minimumFractionDigits: 2})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t})\r\n\r\n\r\n\twindow.soefinding.onRegionChange = function () {\r\n\t\tsoefinding.loadFindingHtml()\r\n\t}\r\n\r\n})"],"mappings":"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","names":[]}
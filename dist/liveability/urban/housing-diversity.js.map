{"version":3,"sources":["../../../src/liveability/urban/housing-diversity.js"],"sourcesContent":["\"use strict\";\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n\tconst keys = soefinding.findingJson.meta.fields.slice(2, 5)\n\tsoefinding.state.year = \"2016\"\n\n\n\t// chart 1, pie\n\tconst series1Items = soefinding.findingJson.data.filter(d => d.Measure == \"2016 Census Number of Dwellings\")\n\tseries1Items.forEach(d =>\n\t\tsoefinding.findingContent[d[\"Regional Planning Area\"]] = { series1: keys.map(k => d[k]) }\n\t)\n\n\tconst options1 = soefinding.getDefaultPieChartOptions()\n\toptions1.chart.type = \"donut\"\n\toptions1.labels = keys.map(k => k.replace(\"-\", \"–\"))\n\toptions1.xaxis.categories = [\"Type\", \"Amount\"]\n\toptions1.tooltip.y = {\n\t\tformatter: (val, options) => {\n\t\t\tconst percent = options.globals.seriesPercent[options.seriesIndex][0]\n\t\t\treturn `${val.toLocaleString()}ha (${percent.toFixed(1)}%)`\n\t\t}\n\t}\n\n\n\tsoefinding.state.chart1 = {\n\t\tseries: soefinding.findingContent[soefinding.state.currentRegionName].series1,\n\t\toptions: options1,\n\t\tchartactive: true,\n\t}\n\n\n\t// chart 2, pie\n\tconst series2Items = soefinding.findingJson.data.filter(d => d.Measure == \"2016-2019 Building Approvals Data\")\n\tseries2Items.forEach(d => soefinding.findingContent[d[\"Regional Planning Area\"]].series2 = keys.map(k => d[k]))\n\n\n\tsoefinding.state.chart2 = {\n\t\tseries: soefinding.findingContent[soefinding.state.currentRegionName].series2,\n\t\toptions: options1,\n\t\tchartactive: true,\n\t}\n\n\n\t// chart 3, stacked column, qld only\n\tconst series3Items = soefinding.findingJson.data.filter(d => d.Measure == \"2016 Census Number of Dwellings\" && d[\"Regional Planning Area\"] != \"Queensland\")\n\tconst series3 = keys.map(k => {\n\t\treturn {\n\t\t\tname: k.replace(\"-\", \"–\"), // ndash\n\t\t\tdata: series3Items.map(d => d[k])\n\t\t}\n\t})\n\n\tconst options3 = soefinding.getDefaultStackedColumnChartOptions()\n\toptions3.xaxis.categories = series3Items.map(d => d[\"Regional Planning Area\"].split(/\\s|–/))\n\toptions3.xaxis.labels.hideOverlappingLabels = false\n\toptions3.xaxis.labels.rotate = 0\n\toptions3.xaxis.labels.rotateAlways = false\n\toptions3.xaxis.tickPlacement = \"between\"\n\toptions3.xaxis.title.text = \"Regional plan area\"\n\toptions3.yaxis.forceNiceScale = false\n\toptions3.yaxis.labels.formatter = (val) => val >= 1000000 ? `${val / 1000000}M` : `${val / 1000}K`\n\toptions3.yaxis.max = 1500000\n\toptions3.yaxis.min = 0\n\toptions3.yaxis.tickAmount = 6\n\toptions3.yaxis.title.text = \"Number of dwellings\"\n\n\tsoefinding.state.chart3 = {\n\t\tseries: series3,\n\t\toptions: options3,\n\t\tchartactive: true,\n\t}\n\n\n\t// chart 4, stacked column, qld only\n\tconst series4Items = soefinding.findingJson.data.filter(d => d.Measure == \"2016-2019 Building Approvals Data\" && d[\"Regional Planning Area\"] != \"Queensland\")\n\tconst series4 = keys.map(k => {\n\t\treturn {\n\t\t\tname: k.replace(\"-\", \"–\"), // ndash\n\t\t\tdata: series4Items.map(d => d[k])\n\t\t}\n\t})\n\n\tconst options4 = JSON.parse(JSON.stringify(options3))\n\toptions4.yaxis.labels.formatter = val => `${val / 1000}K`\n\toptions4.yaxis.max = 120000\n\t//\toptions4.yaxis.tickAmount = 6\n\toptions4.yaxis.title.text = \"Number of building approvals\"\n\n\tsoefinding.state.chart4 = {\n\t\tseries: series4,\n\t\toptions: options4,\n\t\tchartactive: true,\n\t}\n\n\n\tnew Vue({\n\t\tel: \"#chartContainer\",\n\t\tdata: soefinding.state,\n\t\tcomputed: {\n\t\t\theading1: function () {\n\t\t\t\tif (this.currentRegionName == \"Queensland\")\n\t\t\t\t\treturn `Number of dwellings in ${this.year} Queensland census`\n\t\t\t\telse\n\t\t\t\t\treturn `Number of dwellings in ${this.currentRegionName} in ${this.year} Queensland census`\n\t\t\t},\n\t\t\theading2: function () {\n\t\t\t\tif (this.currentRegionName == \"Queensland\")\n\t\t\t\t\treturn \"Proportion of building approvals in 2016–2019 Queensland\"\n\t\t\t\telse\n\t\t\t\t\treturn `Number of building approvals in ${this.currentRegionName} between 2016–2019`\n\t\t\t},\n\n\t\t\theading3: () => \"Number of dwellings in Regional Planning Areas in Queensland 2016 census\",\n\t\t\theading4: () => \"Number of building approvals in Regional Planning Areas between 2016–2019\",\n\t\t},\n\t\tmethods: {\n\t\t\tformatter1: val => val.toLocaleString(),\n\t\t\tpercentcolumn: (series, s) => (s / series.reduce((acc, curr) => acc + curr) * 100).toFixed(1)\n\t\t}\n\t})\n\n\n\twindow.soefinding.onRegionChange = function () {\n\t\t// set the data series in each of the vue apps, for the current region\n\t\t// chart 1\n\t\tApexCharts.exec(\"chart1\", \"updateSeries\", this.findingContent[this.state.currentRegionName].series1)\n\t\t// table 1\n\t\tsoefinding.state.chart1.series = soefinding.findingContent[soefinding.state.currentRegionName].series1\n\n\t\t// chart 2\n\t\tApexCharts.exec(\"chart2\", \"updateSeries\", this.findingContent[this.state.currentRegionName].series2)\n\t\tsoefinding.state.chart2.series = soefinding.findingContent[soefinding.state.currentRegionName].series2\n\t\tsoefinding.loadFindingHtml()\n\t}\n\n})"],"mappings":"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","names":[]}
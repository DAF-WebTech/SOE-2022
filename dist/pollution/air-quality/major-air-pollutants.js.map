{"version":3,"sources":["../../../src/pollution/air-quality/major-air-pollutants.js"],"sourcesContent":["\"use strict\"\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n\tsoefinding.yearKeys = soefinding.findingJson.meta.fields.slice(1);\n\n\t// chart 1. percentage change trends\n\tlet percentSeries = soefinding.findingJson.data.filter(d => d[\"Emission type\"] != \"Volatile organic compounds\")\n\tpercentSeries = percentSeries.map(d => {\n\t\treturn {\n\t\t\tname: d[\"Emission type\"],\n\t\t\tdata: soefinding.yearKeys.map(y => {\n\n\t\t\t\treturn 100.0 / d[soefinding.yearKeys[0]] * d[y]\n\t\t\t})\n\t\t}\n\t})\n\tpercentSeries.sort(function (a, b) {\n\t\treturn b.data.at(-1) - a.data.at(-1)\n\t})\n\n\t// create the vue instance for first chart, our column chart\n\tconst options1 = soefinding.getDefaultLineChartOptions()\n\toptions1.xaxis.categories = soefinding.yearKeys\n\toptions1.xaxis.title.text = \"Year\"\n\toptions1.yaxis.title.text = \"Percentage change\"\n\toptions1.yaxis.tickAmount = 4\n\toptions1.yaxis.min = 0\n\toptions1.yaxis.max = 400\n\toptions1.tooltip.y = {\n\t\tformatter: val => `${val.toLocaleString(undefined, { minimumFractionDigits: 2 })}%`\n\t}\n\toptions1.yaxis.labels.formatter = val => `${val}%`\n\n\t// create vue instance for first chart\n\tsoefinding.state.chart1 = {\n\t\toptions: options1,\n\t\tseries: percentSeries,\n\t\tchartactive: true,\n\t};\n\n\n\t// chart 2, trends\n\tconst trendSeries = soefinding.findingJson.data.map(d => {\n\t\treturn {\n\t\t\tname: d[\"Emission type\"],\n\t\t\tdata: soefinding.yearKeys.map(y => d[y])\n\t\t}\n\t})\n\ttrendSeries.sort(function (a, b) {\n\t\treturn b.data.at(-1) - a.data.at(-1)\n\t})\n\n\tconst options2 = JSON.parse(JSON.stringify(options1))\n\tdelete options2.yaxis.tickAmount\n\tdelete options2.yaxis.min\n\tdelete options2.yaxis.max\n\toptions2.yaxis.title.text = \"Tonnes per annum\"\n\toptions2.tooltip.y.formatter = val => val?.toLocaleString(undefined, { minimumFractionDigits: 3 }) ?? \"\"\n\toptions2.yaxis.labels.formatter = val => val >= 1000 ? `${val / 1000}k` : val\n\n\t// create the vue instance for second chart, \n\tsoefinding.state.chart2 = {\n\t\toptions: options2,\n\t\tseries: trendSeries,\n\t\tchartactive: true,\n\t};\n\n\n\tnew Vue({\n\t\tel: \"#chartContainer\",\n\t\tdata: soefinding.state,\n\t\tcomputed: {\n\t\t\theading1: () => \"Percentage change trends in major air pollutant emissions since 2010\",\n\t\t\theading2: () => \"Trends in emissions for major air pollutants\",\n\t\t},\n\t\tmethods: {\n\t\t\tformatter1: val => val?.toLocaleString() ?? \"\",\n\t\t\tformatter2: val => val?.toLocaleString(undefined, { minimumFractionDigits: 1, maximumFractionDigits: 1 }) ?? \"\"\n\t\t}\n\t});\n\n})\n"],"mappings":"aAEA,SAAS,iBAAiB,mBAAoB,UAAY,CAEzD,WAAW,SAAW,WAAW,YAAY,KAAK,OAAO,MAAM,GAG/D,GAAI,eAAgB,WAAW,YAAY,KAAK,OAAO,GAAK,EAAE,kBAAoB,8BAClF,cAAgB,cAAc,IAAI,GAAK,CACtC,MAAO,CACN,KAAM,EAAE,iBACR,KAAM,WAAW,SAAS,IAAI,GAAK,CAElC,MAAO,KAAQ,EAAE,WAAW,SAAS,IAAM,EAAE,QAIhD,cAAc,KAAK,SAAU,EAAG,EAAG,CAClC,MAAO,GAAE,KAAK,GAAG,IAAM,EAAE,KAAK,GAAG,MAIlC,KAAM,UAAW,WAAW,6BAC5B,SAAS,MAAM,WAAa,WAAW,SACvC,SAAS,MAAM,MAAM,KAAO,OAC5B,SAAS,MAAM,MAAM,KAAO,oBAC5B,SAAS,MAAM,WAAa,EAC5B,SAAS,MAAM,IAAM,EACrB,SAAS,MAAM,IAAM,IACrB,SAAS,QAAQ,EAAI,CACpB,UAAW,KAAO,GAAG,IAAI,eAAe,OAAW,CAAE,sBAAuB,QAE7E,SAAS,MAAM,OAAO,UAAY,KAAO,GAAG,OAG5C,WAAW,MAAM,OAAS,CACzB,QAAS,SACT,OAAQ,cACR,YAAa,MAKd,KAAM,aAAc,WAAW,YAAY,KAAK,IAAI,GAAK,CACxD,MAAO,CACN,KAAM,EAAE,iBACR,KAAM,WAAW,SAAS,IAAI,GAAK,EAAE,OAGvC,YAAY,KAAK,SAAU,EAAG,EAAG,CAChC,MAAO,GAAE,KAAK,GAAG,IAAM,EAAE,KAAK,GAAG,MAGlC,KAAM,UAAW,KAAK,MAAM,KAAK,UAAU,WAC3C,MAAO,UAAS,MAAM,WACtB,MAAO,UAAS,MAAM,IACtB,MAAO,UAAS,MAAM,IACtB,SAAS,MAAM,MAAM,KAAO,mBAC5B,SAAS,QAAQ,EAAE,UAAY,KAAO,KAAK,eAAe,OAAW,CAAE,sBAAuB,KAAQ,GACtG,SAAS,MAAM,OAAO,UAAY,KAAO,KAAO,IAAO,GAAG,IAAM,OAAU,IAG1E,WAAW,MAAM,OAAS,CACzB,QAAS,SACT,OAAQ,YACR,YAAa,MAId,GAAI,KAAI,CACP,GAAI,kBACJ,KAAM,WAAW,MACjB,SAAU,CACT,SAAU,IAAM,uEAChB,SAAU,IAAM,gDAEjB,QAAS,CACR,WAAY,KAAO,KAAK,kBAAoB,GAC5C,WAAY,KAAO,KAAK,eAAe,OAAW,CAAE,sBAAuB,EAAG,sBAAuB,KAAQ","names":[]}
{"version":3,"sources":["../../../src/pollution/greenhouse-gas-omissions/waste-sector.js"],"sourcesContent":["\"use strict\"\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n\tconst yearKeys = soefinding.findingJson.meta.fields.slice(2)\r\n\tconst latestYear = yearKeys[yearKeys.length - 1]\r\n\r\n\t// 1. pie, proportion by state, latest year\r\n\tconst allStates = soefinding.findingJson.data.filter(d => d.Category == \"All\")\r\n\tallStates.sort(function (a, b) {\r\n\t\treturn b[latestYear] - a[latestYear]\r\n\t})\r\n\tconst allStatesSeries = allStates.map(d => d[latestYear])\r\n\r\n\tconst options1 = soefinding.getDefaultPieChartOptions()\r\n\t// the pie charts uses labels, but the table vue is looking for categories\r\n\toptions1.labels = allStates.map(d => d.State)\r\n\toptions1.tooltip = {\r\n\t\ty: {\r\n\t\t\tformatter: (val, options) => {\r\n\t\t\t\tconst percent = options.globals.seriesPercent[options.seriesIndex][0]\r\n\t\t\t\treturn `${val.toLocaleString()} (${percent.toFixed(1)}%)`\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\toptions1.xaxis.categories = [\"Sector\", \"Emissions<br>(million tonnes)\"] // not needed for chart, but vue uses them for table headings\r\n\r\n\tsoefinding.state.chart1 = {\r\n\t\toptions: options1,\r\n\t\tseries: allStatesSeries,\r\n\t\tchartactive: true,\r\n\t};\r\n\r\n\r\n\t// 2. pie qld proportion of sectors, latest year\r\n\tconst qldItems = soefinding.findingJson.data.filter(d => d.State == \"Queensland\" && d.Category != \"All\")\r\n\tqldItems.sort(function (a, b) {\r\n\t\treturn b[latestYear] - a[latestYear]\r\n\t})\r\n\tconst qldSeries = qldItems.map(d => d[latestYear])\r\n\r\n\tconst options2 = JSON.parse(JSON.stringify(options1))\r\n\toptions2.chart.type = \"donut\"\r\n\toptions2.labels = qldItems.map(d => d.Category)\r\n\r\n\tsoefinding.state.chart2 = {\r\n\t\toptions: options2, // reüse\r\n\t\tseries: qldSeries,\r\n\t\tchartactive: true,\r\n\t};\r\n\r\n\r\n\t// 3. stacked area chart, trend in each sector\r\n\tconst qldTrendSeries = qldItems.map(d => {\r\n\t\treturn {\r\n\t\t\tname: d.Category,\r\n\t\t\tdata: yearKeys.map(y => d[y])\r\n\t\t}\r\n\t})\r\n\r\n\tconst options3 = soefinding.getDefaultAreaChartOptions()\r\n\toptions3.xaxis.categories = yearKeys\r\n\toptions3.xaxis.title.text = \"Year\"\r\n\toptions3.yaxis.title.text = \"Tonnes\"\r\n\toptions3.yaxis.labels.formatter = val => `${val.toLocaleString(undefined, {maximumFractionDigits: 3})}M`\r\n\toptions3.tooltip.y = {\r\n\t\tformatter: val => `${(val * 1000000).toLocaleString()}`\r\n\t}\r\n\r\n\tsoefinding.state.chart3 = {\r\n\t\toptions: options3,\r\n\t\tseries: qldTrendSeries,\r\n\t\tchartactive: true,\r\n\t};\r\n\r\n\r\n\t// 4. queensland totals table\r\n\tconst qldTotalItem = soefinding.findingJson.data.find(d => d.State == \"Queensland\" && d.Category == \"All\")\r\n\tconst qldTotalSeries = yearKeys.map(y => qldTotalItem[y])\r\n\r\n\tconst options4 = {\r\n\t\txaxis: { categories: [\"Year\", \"Emissions<br>(million tonnes)\"] },\r\n\t\tlabels: yearKeys\r\n\t}\r\n\r\n\tsoefinding.state.chart4 = {\r\n\t\toptions: options4,\r\n\t\tseries: qldTotalSeries\r\n\t};\r\n\r\n\r\n\tnew Vue({\r\n\t\tel: \"#chartContainer\",\r\n\t\tdata: soefinding.state,\r\n\t\tcomputed: {\r\n\t\t\theading1: () => `Proportion of waste emissions by state, ${latestYear}`,\r\n\t\t\theading2: () => `Proportion of Queensland’s waste emissions by category, ${latestYear}`,\r\n\t\t\theading3: () => \"Trends in Queensland’s waste emissions, by category\",\r\n\t\t\theading4: () => \"Queensland’s total waste emissions\"\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tformatter1: val => val.toLocaleString(undefined, { minimumFractionDigits: 3, maximumFractionDigits: 3 }) //reüse for 2, 3\r\n\t\t}\r\n\t})\r\n})\r\n"],"mappings":"aAEA,SAAS,iBAAiB,mBAAoB,UAAY,CAEzD,GAAM,GAAW,WAAW,YAAY,KAAK,OAAO,MAAM,GACpD,EAAa,EAAS,EAAS,OAAS,GAGxC,EAAY,WAAW,YAAY,KAAK,OAAO,GAAK,EAAE,UAAY,OACxE,EAAU,KAAK,SAAU,EAAG,EAAG,CAC9B,MAAO,GAAE,GAAc,EAAE,KAE1B,GAAM,GAAkB,EAAU,IAAI,GAAK,EAAE,IAEvC,EAAW,WAAW,4BAE5B,EAAS,OAAS,EAAU,IAAI,GAAK,EAAE,OACvC,EAAS,QAAU,CAClB,EAAG,CACF,UAAW,CAAC,EAAK,IAAY,CAC5B,GAAM,GAAU,EAAQ,QAAQ,cAAc,EAAQ,aAAa,GACnE,MAAO,GAAG,EAAI,qBAAqB,EAAQ,QAAQ,UAItD,EAAS,MAAM,WAAa,CAAC,SAAU,iCAEvC,WAAW,MAAM,OAAS,CACzB,QAAS,EACT,OAAQ,EACR,YAAa,IAKd,GAAM,GAAW,WAAW,YAAY,KAAK,OAAO,GAAK,EAAE,OAAS,cAAgB,EAAE,UAAY,OAClG,EAAS,KAAK,SAAU,EAAG,EAAG,CAC7B,MAAO,GAAE,GAAc,EAAE,KAE1B,GAAM,GAAY,EAAS,IAAI,GAAK,EAAE,IAEhC,EAAW,KAAK,MAAM,KAAK,UAAU,IAC3C,EAAS,MAAM,KAAO,QACtB,EAAS,OAAS,EAAS,IAAI,GAAK,EAAE,UAEtC,WAAW,MAAM,OAAS,CACzB,QAAS,EACT,OAAQ,EACR,YAAa,IAKd,GAAM,GAAiB,EAAS,IAAI,GAC5B,EACN,KAAM,EAAE,SACR,KAAM,EAAS,IAAI,GAAK,EAAE,OAItB,EAAW,WAAW,6BAC5B,EAAS,MAAM,WAAa,EAC5B,EAAS,MAAM,MAAM,KAAO,OAC5B,EAAS,MAAM,MAAM,KAAO,SAC5B,EAAS,MAAM,OAAO,UAAY,GAAO,GAAG,EAAI,eAAe,OAAW,CAAC,sBAAuB,OAClG,EAAS,QAAQ,EAAI,CACpB,UAAW,GAAO,GAAI,GAAM,KAAS,oBAGtC,WAAW,MAAM,OAAS,CACzB,QAAS,EACT,OAAQ,EACR,YAAa,IAKd,GAAM,GAAe,WAAW,YAAY,KAAK,KAAK,GAAK,EAAE,OAAS,cAAgB,EAAE,UAAY,OAC9F,EAAiB,EAAS,IAAI,GAAK,EAAa,IAEhD,EAAW,CAChB,MAAO,CAAE,WAAY,CAAC,OAAQ,kCAC9B,OAAQ,GAGT,WAAW,MAAM,OAAS,CACzB,QAAS,EACT,OAAQ,GAIT,GAAI,KAAI,CACP,GAAI,kBACJ,KAAM,WAAW,MACjB,SAAU,CACT,SAAU,IAAM,2CAA2C,IAC3D,SAAU,IAAM,gEAA2D,IAC3E,SAAU,IAAM,2DAChB,SAAU,IAAM,2CAEjB,QAAS,CACR,WAAY,GAAO,EAAI,eAAe,OAAW,CAAE,sBAAuB,EAAG,sBAAuB","names":[]}
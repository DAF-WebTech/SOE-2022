{"version":3,"sources":["../../../src/pollution/waste/interstate-commercial-industrial.js"],"sourcesContent":["\"use strict\"\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n\tconst yearKeys = soefinding.findingJson.meta.fields.slice(2, 6)\n\tconst latestYear = yearKeys[yearKeys.length - 1]\n\n\t// 1. stacked columns, waste by type\n\tlet wasteTypes = soefinding.findingJson.data.filter(d => d[\"Waste type\"] != \"All\")\n\twasteTypes.sort(function (a, b) {\n\t\treturn b[latestYear] - a[latestYear]\n\t})\n\tconst wasteTypeSeries = wasteTypes.map(d => {\n\t\treturn {\n\t\t\tname: d[\"Waste type\"],\n\t\t\tdata: yearKeys.map(y => d[y])\n\t\t}\n\t})\n\n\tconst options1 = soefinding.getDefaultStackedColumnChartOptions()\n\toptions1.xaxis.categories = yearKeys.map(y => y.replace(\"-\", \"–\")) // ndash\n\toptions1.xaxis.title.text = \"Year\"\n\tdelete options1.xaxis.tickPlacement\n\toptions1.yaxis.title.text = \"Tonnes\"\n\toptions1.yaxis.labels.formatter = val => `${val / 1000000}M`\n\toptions1.tooltip.y = {\n\t\tformatter: val => `${val.toLocaleString()}`\n\t}\n\n\n\tsoefinding.state.chart1 = {\n\t\toptions: options1,\n\t\tseries: wasteTypeSeries,\n\t\tchartactive: true,\n\t};\n\n\n\t//2. line chart,yearly trend\n\tconst wasteConstructionDemolition = soefinding.findingJson.data.find(d => d[\"Waste type\"] == \"Commercial and industrial\")\n\tconst wasteConstructionDemolitionSeries = [{ name: \"Tonnes\", data: yearKeys.map(y => wasteConstructionDemolition[y]) }]\n\n\tconst options2 = soefinding.getDefaultLineChartOptions()\n\toptions2.xaxis.categories = yearKeys.map(y => y.replace(\"-\", \"–\")) // ndash\n\toptions2.xaxis.title.text = \"Year\"\n\toptions2.xaxis.tickPlacement = \"between\"\n\toptions2.xaxis.axisTicks = { show: false }\n\toptions2.yaxis.title.text = \"Tonnes\"\n\toptions2.yaxis.labels.formatter = val => val < 1000000 ? `${val / 1000}K` : `${val / 1000000}M`\n\toptions2.tooltip.y = {\n\t\tformatter: val => `${val.toLocaleString()}`\n\t}\n\n\tsoefinding.state.chart2 = {\n\t\toptions: options2,\n\t\tseries: wasteConstructionDemolitionSeries,\n\t\tchartactive: true,\n\t};\n\n\n\t// 3. pie, latest, not sent to landfill \n\t//2018-19 Not sent to landfill\n\tconst LATEST_NOT_SENT = \"2018-19 Not sent to landfill\"\n\twasteTypes.sort(function (a, b) {\n\t\treturn b[LATEST_NOT_SENT] - a[LATEST_NOT_SENT]\n\t})\n\twasteTypes = wasteTypes.filter(d => d[LATEST_NOT_SENT] != null)\n\tconst notSentLandfillSeries = wasteTypes.map(d => d[LATEST_NOT_SENT])\n\n\tconst options3 = soefinding.getDefaultPieChartOptions()\n\toptions3.labels = wasteTypes.map(d => d[\"Waste type\"])\n\toptions3.xaxis.categories = [\"Waste type\", \"Tonnes\"] // not needed for chart, but vue uses them for table headings\n\toptions3.tooltip.y = {\n\t\tformatter: (val, options) => {\n\t\t\tconst percent = options.globals.seriesPercent[options.seriesIndex][0]\n\t\t\treturn `${val.toLocaleString()} (${percent.toFixed(1)}%)`\n\t\t}\n\t}\n\n\tsoefinding.state.chart3 = {\n\t\toptions: options3,\n\t\tseries: notSentLandfillSeries,\n\t\tchartactive: true,\n\t};\n\n\n\t// 4 stacked columns, latest year, other and landfill\n\tconst keys = [\"2018-19 Received by Landfill\", LATEST_NOT_SENT]\n\tconst latestOtherLandfillSeries = keys.map(k => {\n\t\treturn {\n\t\t\tname: k.replace(\"-\", \"–\"), // ndash\n\t\t\tdata: wasteTypes.map(d => d[k])\n\t\t}\n\t})\n\n\n\tconst options4 = soefinding.getDefaultColumnChartOptions()\n\toptions4.chart.stacked = true\n\toptions4.legend.inverseOrder = true\n\toptions4.xaxis.categories = wasteTypes.map(d => d[\"Waste type\"].split(\" \")) //keys\n\toptions4.xaxis.title.text = \"Type of interstate construction and demolition waste received\"\n\toptions4.xaxis.tickPlacement = \"between\"\n\toptions4.yaxis.title.text = \"Tonnes (million)\"\n\toptions4.yaxis.labels.formatter = val => {\n\t\tif (val == 0) return 0\n\t\tif (val >= 1000000) return \"1M\"\n\t\treturn `${val / 1000}K`\n\t}\n\toptions4.yaxis.labels.minWidth = 20\n\toptions4.tooltip.y = {\n\t\tformatter: val => `${(val)?.toLocaleString() ?? \"n/a\"}`\n\t}\n\n\tsoefinding.state.chart4 = {\n\t\toptions: options4,\n\t\tseries: latestOtherLandfillSeries,\n\t\tchartactive: true,\n\t};\n\n\tconst LATEST_YEAR = soefinding.findingJson.meta.fields[soefinding.findingJson.meta.fields.length - 1].replace(\"-\", \"–\") // endash\n\n\tnew Vue({\n\t\tel: \"#chartContainer\",\n\t\tdata: soefinding.state,\n\t\tcomputed: {\n\t\t\theading1: () => \"Interstate commercial and industrial waste received, by waste type\",\n\t\t\theading2: () => \"Trend in total interstate commercial and industrial waste received\",\n\t\t\theading3: () => `Proportion of interstate commercial and industrial waste received, ${LATEST_YEAR} Not sent to landfill`,\n\t\t\theading4: () => `Interstate commercial and industrial waste received by landfill and other, ${LATEST_YEAR}`\n\t\t},\n\t\tmethods: {\n\t\t\tformatter1: val => val?.toLocaleString() ?? \"\",\n\t\t\tonStackedRadioClick: function () {\n\t\t\t\tthis.chart1.options.chart.type = \"bar\"\n\t\t\t\tthis.chart1.options.chart.stacked = true\n\t\t\t},\n\t\t\tonLineRadioClick: function () {\n\t\t\t\tthis.chart1.options.chart.type = \"line\"\n\t\t\t\tthis.chart1.options.chart.stacked = false\n\t\t\t\tthis.chart1.options.markers = { size: 4 } // ignored by column chart\n\t\t\t\tthis.chart1.options.tooltip.shared = false\n\t\t\t}\n\t\t}\n\n\t})\n})\n"],"mappings":"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","names":[]}
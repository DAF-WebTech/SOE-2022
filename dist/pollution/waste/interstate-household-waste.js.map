{"version":3,"sources":["../../../src/pollution/waste/interstate-household-waste.js"],"sourcesContent":["\"use strict\"\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n\tconst yearKeys = soefinding.findingJson.meta.fields.slice(1, 6)\r\n\tconst latestYear = yearKeys[yearKeys.length - 1]\r\n\r\n\t// 1. stacked column, waste type yearly\r\n\tconst sectorItems = soefinding.findingJson.data.filter(d => d[\"Waste type\"] !== \"All\")\r\n\tsectorItems.sort(function (a, b) {\r\n\t\treturn b[latestYear] - a[latestYear]\r\n\t})\r\n\tconst wasteTypeSeries = sectorItems.map(d => {\r\n\t\treturn {\r\n\t\t\tname: d[\"Waste type\"],\r\n\t\t\tdata: yearKeys.map(y => d[y])\r\n\t\t}\r\n\t})\r\n\r\n\tconst options1 = soefinding.getDefaultStackedColumnChartOptions()\r\n\toptions1.markers = { size: 4 } // line chart only\r\n\toptions1.tooltip.shared = false // line chart only\r\n\toptions1.tooltip.y = {\r\n\t\tformatter: val => `${(val)?.toLocaleString() ?? \"n/a\"}`\r\n\t}\r\n\toptions1.xaxis.categories = yearKeys.map(y => y.replace(\"-\", \"–\")) // ndash\r\n\toptions1.xaxis.title.text = \"Year\"\r\n\toptions1.yaxis.forceNiceScale = false\r\n\toptions1.yaxis.labels.formatter = val => `${(val / 1000000)}M`\r\n\toptions1.yaxis.max = 1250000\r\n\toptions1.yaxis.min = 0\r\n\toptions1.yaxis.tickAmount = 5\r\n\toptions1.yaxis.title.text = \"Tonnes (million)\"\r\n\r\n\r\n\tsoefinding.state.chart1 = {\r\n\t\toptions: options1,\r\n\t\tseries: wasteTypeSeries,\r\n\t\tchartactive: true,\r\n\t};\r\n\r\n\r\n\t//2. line chart, total items by year\r\n\tconst allItem = soefinding.findingJson.data.find(d => d[\"Waste type\"] == \"Municipal solid\")\r\n\tconst totalItemSeries = [{ name: \"Tonnes\", data: yearKeys.slice(1).map(y => allItem[y]) }]\r\n\r\n\tconst options2 = soefinding.getDefaultLineChartOptions()\r\n\toptions2.chart.stacked = true\r\n\toptions2.xaxis.categories = yearKeys.slice(1).map(y => y.replace(\"-\", \"–\")) // ndash\r\n\toptions2.xaxis.title.text = \"Year\"\r\n\toptions2.xaxis.tickPlacement = \"between\"\r\n\toptions2.yaxis.title.text = \"Tonnes\"\r\n\toptions2.yaxis.tickAmount = 7\r\n\toptions2.yaxis.min = 40000\r\n\toptions2.yaxis.max = 70000\r\n\toptions2.yaxis.labels.formatter = val => `${(val.toLocaleString())}`\r\n\toptions2.tooltip.y = {\r\n\t\tformatter: val => `${val}`\r\n\t}\r\n\r\n\r\n\r\n\tsoefinding.state.chart2 = {\r\n\t\toptions: options2,\r\n\t\tseries: totalItemSeries,\r\n\t\tchartactive: true,\r\n\t};\r\n\r\n\r\n\t// 3. pie lastest other items\r\n\tsectorItems.sort(function (a, b) {\r\n\t\treturn b[\"2018-19 Other\"] - a[\"2018-19 Other\"]\r\n\t})\r\n\tconst latestOtherSeries = sectorItems.map(d => d[\"2018-19 Other\"] ? d[\"2018-19 Other\"] : 0)\r\n\r\n\tconst options3 = soefinding.getDefaultPieChartOptions()\r\n\t// the pie charts uses labels, but the table vue is looking for categories\r\n\toptions3.labels = sectorItems.map(d => d[\"Waste type\"])\r\n\toptions3.tooltip = {\r\n\t\ty: {\r\n\t\t\tformatter: (val, options) => {\r\n\t\t\t\tconst percent = options.globals.seriesPercent[options.seriesIndex][0]\r\n\t\t\t\treturn `${val.toLocaleString()} (${percent.toFixed(1)}%)`\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\toptions3.xaxis.categories = [\"Waste Type\", \"Tonnes\"] // not needed for chart, but vue uses them for table headings\r\n\r\n\tsoefinding.state.chart3 = {\r\n\t\toptions: options3,\r\n\t\tseries: latestOtherSeries,\r\n\t\tchartactive: true,\r\n\t};\r\n\r\n\r\n\t// 4 stacked columns, latest year, other and landfill\r\n\tconst keys = [\"2018-19 Received by Landfill\", \"2018-19 Other\"]\r\n\tconst latestOtherLandfillSeries = keys.map(k => {\r\n\t\treturn {\r\n\t\t\tname: k.replace(\"-\", \"–\").split(\" \"),  //ndash\r\n\t\t\tdata: sectorItems.map(d => d[k])\r\n\t\t}\r\n\t})\r\n\r\n\r\n\tconst options4 = soefinding.getDefaultBarChartOptions()\r\n\toptions4.chart.stacked = true\r\n\toptions4.xaxis.categories = sectorItems.map(d => d[\"Waste type\"].split(\" \"))\r\n\toptions4.xaxis.title.text = \"Type of interstate household waste received\"\r\n\toptions4.yaxis.title.text = \"Tonnes (million)\"\r\n\toptions4.yaxis.labels.formatter = val => val == 0 ? 0 : (val >= 100000 ? `${(val / 1000000).toFixed(1)}m` : `${(val / 1000)}k`)\r\n\toptions4.tooltip.y = {\r\n\t\tformatter: val => `${(val)?.toLocaleString() ?? \"n/a\"}`\r\n\t}\r\n\tdelete options4.xaxis.tickPlacement\r\n\r\n\r\n\tsoefinding.state.chart4 = {\r\n\t\toptions: options4,\r\n\t\tseries: latestOtherLandfillSeries,\r\n\t\tchartactive: true,\r\n\t};\r\n\r\n\r\n\r\n\tnew Vue({\r\n\t\tel: \"#chartContainer\",\r\n\t\tdata: soefinding.state,\r\n\t\tcomputed: {\r\n\t\t\theading1: () => \"Interstate household waste received, by waste type\",\r\n\t\t\theading2: () => \"Trend in total interstate household waste received\",\r\n\t\t\theading3: () => \"Proportion of interstate household waste received, 2018–19 Other\",\r\n\t\t\theading4: () => \"Interstate household waste received by landfill and other, 2018–2019\"\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tformatter1: val => val?.toLocaleString() ?? \"\",\r\n\t\t\tformatter2: val => val?.toLocaleString() ?? 0,\r\n\t\t\tonStackedRadioClick: function () {\r\n\t\t\t\tthis.chart1.options.chart.type = \"bar\"\r\n\t\t\t\tthis.chart1.options.chart.stacked = true\r\n\t\t\t},\r\n\t\t\tonLineRadioClick: function () {\r\n\t\t\t\tthis.chart1.options.chart.type = \"line\"\r\n\t\t\t\tthis.chart1.options.chart.stacked = false\r\n\t\t\t\tthis.chart1.options.markers = { size: 4 } // ignored by column chart\r\n\t\t\t\tthis.chart1.options.tooltip.shared = false\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n})\r\n"],"mappings":"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","names":[]}
{"version":3,"sources":["../../../src/pollution/waste/main-material-types.js"],"sourcesContent":["\"use strict\"\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n\n\tconst yearKeys = soefinding.findingJson.meta.fields.slice(4)\n\tconst latestYear = yearKeys[yearKeys.length - 1]\n\n\t// groupings\n\tconst materials = {}\n\tconst extents = { Australia: [], Queensland: [], }\n\tconst sites = {}\n\tsoefinding.findingJson.data.forEach(d => {\n\t\tif (!materials[d.Material])\n\t\t\tmaterials[d.Material] = []\n\t\tmaterials[d.Material].push(d)\n\n\t\tif (d.Extent == \"Queensland\")\n\t\t\textents.Queensland.push(d)\n\t\telse\n\t\t\textents.Australia.push(d)\n\n\t\tif (!sites[d.Site])\n\t\t\tsites[d.Site] = []\n\t\tsites[d.Site].push(d)\n\t})\n\n\n\t// 1. column chart, count by type\n\tconst countAllSeries = Object.keys(extents).map(e => {\n\t\treturn {\n\t\t\tname: e,\n\t\t\tdata: extents[e].filter(d => d.Measure == \"Count\" && d.Site == \"All\" && d.Material != \"Large items\").map(d => Math.ceil(d[latestYear]))\n\t\t}\n\t})\n\n\n\tconst options1 = soefinding.getDefaultBarChartOptions()\n\toptions1.xaxis.categories = Object.keys(materials).filter(m => m != \"Large items\")\n\toptions1.xaxis.title.text = \"Litter Type\"\n\toptions1.yaxis.title.text = \"Number of items per 100m²\"\n\n\tsoefinding.state.chart1 = {\n\t\toptions: options1,\n\t\tseries: countAllSeries,\n\t\tchartactive: true,\n\t};\n\n\n\t// 2. column chart, count by volume\n\tconst volumeAllSeries = Object.keys(extents).map(e => {\n\t\treturn {\n\t\t\tname: e,\n\t\t\tdata: extents[e].filter(d => d.Measure == \"Volume\"/* && d.Site == \"All\"*/).map(d => d[latestYear])\n\t\t}\n\t})\n\n\tconst options2 = JSON.parse(JSON.stringify(options1))\n\toptions2.xaxis.categories = Object.keys(materials)\n\toptions2.yaxis.title.text = \"Litres per 100m²\"\n\toptions2.yaxis.tickAmount = 4\n\toptions2.yaxis.max = 2.0\n\toptions2.yaxis.labels.formatter = val => val.toLocaleString(undefined, { minimumFractionDigits: 1, maximumFractionDigits: 1 })\n\n\n\tsoefinding.state.chart2 = {\n\t\toptions: options2,\n\t\tseries: volumeAllSeries,\n\t\tchartactive: true,\n\t};\n\n\n\t//3 and 4. stacked column, litter count by type in Queensland and Australia\n\tconst options3 = JSON.parse(JSON.stringify(options1))\n\toptions3.chart.stacked = true\n\toptions3.legend.inverseOrder = true\n\toptions3.xaxis.categories = yearKeys.map(y => y.replace(\"-\", \"–\")) // ndash\n\toptions3.xaxis.title.text = \"Year\"\n\toptions3.yaxis.labels.formatter = val => `${val.toFixed(0)}`\n\toptions3.tooltip = { y: { formatter: val => val } }\n\tconst options4 = JSON.parse(JSON.stringify(options3))\n\toptions4.tooltip = options4.tooltip\n\n\tObject.keys(extents).forEach((e, i) => {\n\t\tconst countAllItems = soefinding.findingJson.data.filter(d =>\n\t\t\td.Extent == e\n\t\t\t&& d.Measure == \"Count\"\n\t\t\t&& d.Site == \"All\")\n\t\tcountAllItems.sort(function (a, b) {\n\t\t\treturn b[latestYear] - a[latestYear]\n\t\t})\n\t\tconst countAllSeries = countAllItems.map(d => {\n\t\t\treturn {\n\t\t\t\tname: d.Material,\n\t\t\t\tdata: yearKeys.map(y => d[y])\n\t\t\t}\n\t\t})\n\n\t\tsoefinding.state[i == 0 ? \"chart3\" : \"chart4\"] = {\n\t\t\toptions: i == 0 ? options3 : options4,\n\t\t\tseries: countAllSeries,\n\t\t\tchartactive: true,\n\t\t}\n\t})\n\n\n\t//5 and 6. stacked column, cigarette and non-cigarette count by type in Queensland and Australia\n\tconst options5 = JSON.parse(JSON.stringify(options3))\n\toptions5.xaxis.categories = Object.keys(sites)  // not large items\n\toptions5.yaxis.labels.formatter = val => Math.round(val)\n\toptions5.tooltip = { y: { formatter: (val, options) => (options.seriesIndex == 0 ? val : val.toFixed(1)) } }\n\n\n\tObject.keys(extents).forEach((e, i) => {\n\t\tconst cigaretteItems = soefinding.findingJson.data.filter(d =>\n\t\t\td.Extent == e\n\t\t\t&& d.Material == \"Cigarettes\"\n\t\t\t&& d.Measure == \"Count\"\n\t\t)\n\t\tconst cigaretteSeries = [\n\t\t\t{\n\t\t\t\tname: \"Cigarette\",\n\t\t\t\tdata: cigaretteItems.map(c => c[latestYear])\n\t\t\t}\n\t\t]\n\t\tconst nonCigaretteItems = soefinding.findingJson.data.filter(d =>\n\t\t\td.Extent == e\n\t\t\t&& d.Material != \"Cigarettes\"\n\t\t\t&& d.Measure == \"Count\"\n\t\t)\n\n\t\tcigaretteSeries.push({\n\t\t\tname: \"Non-cigarette\",\n\t\t\tdata: Object.keys(sites).map(s => {\n\t\t\t\treturn nonCigaretteItems.filter(nci => nci.Site == s).reduce(function (a, c) {\n\t\t\t\t\treturn a + c[latestYear]\n\t\t\t\t}, 0)\n\t\t\t})\n\t\t})\n\n\t\tsoefinding.state[`chart${i + 5}`] = {\n\t\t\toptions: options5,\n\t\t\tseries: cigaretteSeries,\n\t\t\tchartactive: true,\n\t\t}\n\t})\n\n\n\t//7. Litter type by site in qld\n\tconst materialSiteQldItems = extents.Queensland.filter(d => d.Measure == \"Count\")\n\tconst materialSiteQldSeries = []\n\tfor (let material in materials) {\n\t\tif (material == \"Large items\") continue\n\t\tmaterialSiteQldSeries.push({\n\t\t\tname: material,\n\t\t\tdata: materialSiteQldItems.filter(d => d.Material == material).map(d => d[latestYear])\n\t\t})\n\t}\n\n\tconst options7 = JSON.parse(JSON.stringify(options5))\n\toptions7.yaxis.labels.formatter = val => Math.round(val)\n\toptions7.tooltip.y.formatter = function (val) {\n\t\treturn val\n\t}\n\n\tsoefinding.state.chart7 = {\n\t\toptions: options7,\n\t\tseries: materialSiteQldSeries,\n\t\tchartactive: true,\n\t}\n\n\n\t// charts 8–13, line chart for each material type in qld and aust\n\tconst options8 = soefinding.getDefaultLineChartOptions()\n\toptions8.xaxis.axisTicks = { show: false }\n\toptions8.xaxis.categories = yearKeys.map(y => [y.slice(0, 4) + \"–\", y.slice(5)]) // ndash\n\toptions8.xaxis.labels.rotateAlways = false\n\toptions8.xaxis.tickPlacement = \"between\"\n\toptions8.xaxis.title.text = \"Year\"\n\toptions8.yaxis.title.text = \"Number of items per 100m²\"\n\toptions8.yaxis.min = 0\n\n\tObject.keys(materials).forEach((m, i) => { // chart for each material\n\t\tif (m == \"Large items\") return\n\n\t\tconst series = Object.keys(extents).map(e => {\n\t\t\tconst item = extents[e].find(d => d.Material == m && d.Measure == \"Count\" && d.Site == \"All\")\n\t\t\treturn {\n\t\t\t\tname: e,\n\t\t\t\tdata: yearKeys.map(y => item[y])\n\t\t\t}\n\t\t})\n\n\t\tconst myOptions = JSON.parse(JSON.stringify(options8))\n\t\tswitch (m) {\n\t\t\tcase \"Cigarettes\":\n\t\t\t\tmyOptions.yaxis.max = 50\n\t\t\t\tbreak\n\t\t\tcase \"Glass\":\n\t\t\t\tmyOptions.yaxis.max = 2\n\t\t\t\tmyOptions.yaxis.labels.formatter = val => Math.round(val)\n\t\t\t\tmyOptions.tooltip = { y: { formatter: val => val } }\n\t\t\t\tbreak\n\t\t\tcase \"Metal\":\n\t\t\tcase \"Paper\":\n\t\t\tcase \"Plastic\":\n\t\t\tcase \"Other\":\n\t\t\t\tmyOptions.yaxis.labels.formatter = val => Math.round(val)\n\t\t\t\tmyOptions.tooltip = { y: { formatter: val => val } }\n\t\t\t\tbreak\n\t\t}\n\n\t\tsoefinding.state[`chart${i + 8}`] = {\n\t\t\toptions: myOptions,\n\t\t\tseries: series,\n\t\t\tchartactive: true,\n\t\t}\n\t})\n\n\n\n\tnew Vue({\n\t\tel: \"#chartContainer\",\n\t\tdata: soefinding.state,\n\t\tcomputed: {\n\t\t\theading1: () => `Litter items by type, ${latestYear.replace(\"-\", \"–\")}`,\n\t\t\theading2: () => `Volume of litter by type, ${latestYear.replace(\"-\", \"–\")}`,\n\t\t\theading3: () => \"Average litter count by type in Queensland\",\n\t\t\theading4: () => \"Average litter count by type in Australia\",\n\t\t\theading5: () => `Number of cigarette and non-cigarette litter items by site type in Queensland, ${latestYear.replace(\"-\", \"–\")}`,\n\t\t\theading6: () => `Number of cigarette and non-cigarette litter items by site type in Australia, ${latestYear.replace(\"-\", \"–\")}`,\n\t\t\theading7: () => `Litter type by site type in Queensland, ${latestYear.replace(\"-\", \"–\")}`,\n\t\t\theading8: () => `Cigarettes — Comparison of trends in litter count by Queensland and Australia`,\n\t\t\theading9: () => `Glass — Comparison of trends in litter count by Queensland and Australia`,\n\t\t\theading10: () => `Metal — Comparison of trends in litter count by Queensland and Australia`,\n\t\t\theading11: () => `Paper — Comparison of trends in litter count by Queensland and Australia`,\n\t\t\theading12: () => `Plastic — Comparison of trends in litter count by Queensland and Australia`,\n\t\t\theading13: () => `Other material type — Comparison of trends in litter count by Queensland and Australia`,\n\t\t},\n\t\tmethods: {\n\t\t\tformatter1: val => val,\n\t\t\tformatter2: val => val.toLocaleString(undefined, { minimumFractionDigits: 3 }),\n\t\t\tformatter3: val => val == null ? null : Number.isInteger(val) ? val : val.toLocaleString(undefined, { minimumFractionDigits: 1 }),\n\t\t\tonStackedRadioClick: function (chart) {\n\t\t\t\tchart.options.chart.type = \"bar\"\n\t\t\t\tchart.options.chart.stacked = true\n\t\t\t},\n\t\t\tonLineRadioClick: function (chart) {\n\t\t\t\tchart.options.chart.type = \"line\"\n\t\t\t\tchart.options.chart.stacked = false\n\t\t\t\tthis.chart1.options.markers = { size: 4 } // ignored by column chart\n\t\t\t\tthis.chart1.options.tooltip.shared = false\n\t\t\t}\n\t\t}\n\t})\n})\n"],"mappings":"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","names":[]}
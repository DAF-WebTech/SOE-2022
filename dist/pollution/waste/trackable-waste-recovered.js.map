{"version":3,"sources":["../../../src/pollution/waste/trackable-waste-recovered.js"],"sourcesContent":["\"use strict\"\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n\tconst yearKeys = soefinding.findingJson.meta.fields.slice(1)\r\n\tconst latestYear = yearKeys[yearKeys.length - 1]\r\n\r\n\t//1. totals for each year\r\n\tconst totals = soefinding.findingJson.data.find(d => d[\"Waste description\"] == \"Total\")\r\n\r\n\tconst totalSeries = [{\r\n\t\tname: `Total`,\r\n\t\tdata: yearKeys.map(y => totals[y])\r\n\t}]\r\n\r\n\tconst options1 = soefinding.getDefaultBarChartOptions()\r\n\toptions1.xaxis.categories = yearKeys.map(y => y.replace(\"-\", \"–\")) // ndash\r\n\toptions1.xaxis.tickPlacement = \"between\"\r\n\toptions1.xaxis.title.text = \"Year\"\r\n\toptions1.yaxis.title.text = \"Tonnes\"\r\n\toptions1.yaxis.labels.formatter = val => {\r\n\t\treturn val < 1000000 ? `${val / 1000}K` : `${val / 1000000}M`\r\n\t}\r\n\toptions1.tooltip.y = {\r\n\t\tformatter: val => val.toLocaleString()\r\n\t}\r\n\r\n\t// create vue instance for first chart\r\n\tsoefinding.state.chart1 = {\r\n\t\toptions: options1,\r\n\t\tseries: totalSeries,\r\n\t\tchartactive: true,\r\n\t};\r\n\r\n\r\n\t// 2. latest year each waste type\r\n\tconst wasteItems = soefinding.findingJson.data.filter(d => d[\"Waste description\"] != \"Total\")\r\n\twasteItems.sort(function (a, b) {\r\n\t\treturn b[latestYear] - a[latestYear]\r\n\t})\r\n\tconst wasteSeries = wasteItems.map(d => d[latestYear])\r\n\r\n\tconst options2 = soefinding.getDefaultPieChartOptions()\r\n\toptions2.colors = options2.colors.concat([\"#33b2df\", \"#546E7A\", \"#d4526e\", \"#13d8aa\", \"#A5978B\"])\r\n\toptions2.xaxis.categories = [\"Waste description\", latestYear]\r\n\toptions2.labels = wasteItems.map(d => d[\"Waste description\"])\r\n\toptions2.tooltip = {\r\n\t\ty: {\r\n\t\t\tformatter: (val, options) => {\r\n\t\t\t\tconst percent = options.globals.seriesPercent[options.seriesIndex][0]\r\n\t\t\t\treturn `${val.toLocaleString()} (${percent.toFixed(1)}%)`\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsoefinding.state.chart2 = {\r\n\t\toptions: options2,\r\n\t\tseries: wasteSeries,\r\n\t\tchartactive: true,\r\n\t};\r\n\r\n\r\n\tnew Vue({\r\n\t\tel: \"#chartContainer\",\r\n\t\tdata: soefinding.state,\r\n\t\tcomputed: {\r\n\t\t\theading1: () => \"Trackable waste recovered\",\r\n\t\t\theading2: () => `Proportion of trackable waste recovered by waste type, ${latestYear.replace(\"-\", \"–\")}`,\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tformatter1: val => val.toLocaleString(),\r\n\t\t}\r\n\t})\r\n})\r\n"],"mappings":"aAEA,SAAS,iBAAiB,mBAAoB,UAAY,CAEzD,GAAM,GAAW,WAAW,YAAY,KAAK,OAAO,MAAM,GACpD,EAAa,EAAS,EAAS,OAAS,GAGxC,EAAS,WAAW,YAAY,KAAK,KAAK,GAAK,EAAE,sBAAwB,SAEzE,EAAc,CAAC,CACpB,KAAM,QACN,KAAM,EAAS,IAAI,GAAK,EAAO,MAG1B,EAAW,WAAW,4BAC5B,EAAS,MAAM,WAAa,EAAS,IAAI,GAAK,EAAE,QAAQ,IAAK,WAC7D,EAAS,MAAM,cAAgB,UAC/B,EAAS,MAAM,MAAM,KAAO,OAC5B,EAAS,MAAM,MAAM,KAAO,SAC5B,EAAS,MAAM,OAAO,UAAY,GAC1B,EAAM,IAAU,GAAG,EAAM,OAAU,GAAG,EAAM,OAEpD,EAAS,QAAQ,EAAI,CACpB,UAAW,GAAO,EAAI,kBAIvB,WAAW,MAAM,OAAS,CACzB,QAAS,EACT,OAAQ,EACR,YAAa,IAKd,GAAM,GAAa,WAAW,YAAY,KAAK,OAAO,GAAK,EAAE,sBAAwB,SACrF,EAAW,KAAK,SAAU,EAAG,EAAG,CAC/B,MAAO,GAAE,GAAc,EAAE,KAE1B,GAAM,GAAc,EAAW,IAAI,GAAK,EAAE,IAEpC,EAAW,WAAW,4BAC5B,EAAS,OAAS,EAAS,OAAO,OAAO,CAAC,UAAW,UAAW,UAAW,UAAW,YACtF,EAAS,MAAM,WAAa,CAAC,oBAAqB,GAClD,EAAS,OAAS,EAAW,IAAI,GAAK,EAAE,sBACxC,EAAS,QAAU,CAClB,EAAG,CACF,UAAW,CAAC,EAAK,IAAY,CAC5B,GAAM,GAAU,EAAQ,QAAQ,cAAc,EAAQ,aAAa,GACnE,MAAO,GAAG,EAAI,qBAAqB,EAAQ,QAAQ,UAKtD,WAAW,MAAM,OAAS,CACzB,QAAS,EACT,OAAQ,EACR,YAAa,IAId,GAAI,KAAI,CACP,GAAI,kBACJ,KAAM,WAAW,MACjB,SAAU,CACT,SAAU,IAAM,4BAChB,SAAU,IAAM,0DAA0D,EAAW,QAAQ,IAAK,aAEnG,QAAS,CACR,WAAY,GAAO,EAAI","names":[]}